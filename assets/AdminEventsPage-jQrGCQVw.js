import{Q as le}from"./QSpace-zJjN7v2-.js";import{L as re,r as w,w as J,M as u,N as o,O as a,S as t,a6 as O,a7 as B,W as c,V as m,T as _,v as ie,Z as r,$ as n,X as g,a0 as p,Y as $,_ as R,a1 as A,a3 as L,a4 as T,at as K,aq as F,ap as de,a as W,t as ce,Q as ue,P as me,U as fe}from"./index-CDzfjR1d.js";import{Q as ve,a as X}from"./QTabs-DsozJY-w.js";import{Q as oe}from"./QSpinnerDots-DupLQtYO.js";import{u as ne,a as E,b as v,Q as k}from"./use-quasar-CoSzPzcs.js";import{Q}from"./QBadge-BHrrKz5O.js";import{Q as ge,a as Z}from"./QTabPanels-Cm6Ol-27.js";import{Q as _e}from"./QPage-f92wfBlk.js";import{b as ee,g as ye,a as pe}from"./event-CAaR3OOf.js";import{d as y}from"./dayjs.min-BtPkePTV.js";import{f as G}from"./formatter-Cde3UNlN.js";import{Q as b}from"./QTooltip-BpKTn2x_.js";import{Q as xe}from"./QChip-CDmEXM_K.js";import{Q as te}from"./QList-DS0KwhwR.js";import{C as be}from"./ClosePopup-S2bw8XP2.js";import{u as se,c as ke,b as he}from"./application-_UpZYaPi.js";import{b as ae}from"./tag-colors-BBxGMC29.js";import{_ as qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QResizeObserver-Ce1VDxPF.js";import"./rtl-DFPa-2ov.js";import"./use-panel-D7X0vCDm.js";import"./touch-BjYP5sR0.js";import"./selection-Bvitp7Xf.js";import"./use-render-cache-DLxPkVnQ.js";import"./position-engine-BIa8PX1G.js";const $e={class:"text-h6"},Ce={key:0,class:"q-mr-lg text-subtitle2"},we={key:0,class:"text-negative q-ml-sm text-bold"},Qe={key:0,class:"text-center text-grey q-pa-xl"},De={key:1,class:"q-pa-sm q-gutter-y-md"},Ve={class:"row items-center q-gutter-md no-wrap"},Ee=["src"],ze={class:"col",style:{"min-width":"0"}},je=["onClick"],Re={class:"text-caption text-grey ellipsis"},Ae={class:"col-auto"},Pe={key:0,class:"row q-gutter-xs"},Se={key:1,class:"text-grey"},Ye={key:0,class:"row items-center q-gutter-x-sm"},Ue=["src"],Ie=["onClick"],Me={class:"column items-center"},Be={class:"row q-gutter-sm items-center"},Te={__name:"EventReviewDialog",props:{modelValue:Boolean,event:Object},emits:["update:modelValue","refresh","hide"],setup(C,{emit:z}){const h=C,P=z,f=ne(),S=re(),q=w([]),j=w(!1),x=w(0),N=l=>P("update:modelValue",l),Y=l=>({approved:"已錄取",rejected:"已拒絕",cancelled:"已取消",pending:"待審核"})[l]||"未知",U=l=>({approved:"positive",rejected:"negative",cancelled:"grey",pending:"orange"})[l]||"grey",I=async()=>{if(h.event){j.value=!0;try{const{data:l}=await he(h.event._id);q.value=l.result,x.value=q.value.filter(e=>e.status==="approved").length}catch(l){console.error(l),f.notify({color:"negative",message:"讀取報名名單失敗"})}finally{j.value=!1}}},D=(l,e)=>{e==="rejected"?f.dialog({title:"拒絕申請",message:"請輸入拒絕原因（此原因將會通知申請者）：",prompt:{model:"",type:"textarea",isValid:s=>s.length>0,placeholder:"例如：資格不符、名額已滿..."},cancel:!0,persistent:!0}).onOk(s=>{M(l,e,s)}):M(l,e)},M=async(l,e,s="")=>{try{await se(l,{status:e,reviewComment:s});const d=e==="approved"?"已成功錄取志工":"已將申請設為拒絕",H=e==="approved"?"check_circle":"close";f.notify({color:"positive",message:d,icon:H}),await I(),P("refresh")}catch(d){console.error(d);const H=d.response?.data?.message||"審核失敗";f.notify({color:"negative",message:H})}},V=async(l,e)=>{try{await se(l._id,{attended:e}),l.user?._id===S.user._id&&await S.fetchProfile(),f.notify({color:"positive",message:e?"已標記出席，時數已累計":"已取消出席，時數已扣除",icon:"update"})}catch(s){console.error(s),l.attended=!e;const d=s.response?.data?.message||"更新出席狀態失敗";f.notify({color:"negative",message:d})}},i=l=>{if(l.attended){f.notify({color:"warning",icon:"priority_high",message:"無法刪除！請先將出席狀態切換為「未出席」。"});return}if(l.status==="approved"){f.notify({color:"negative",icon:"block",message:"已錄取的志工紀錄不可刪除！請先將狀態改為拒絕。"});return}f.dialog({title:"刪除申請紀錄",message:`確定要刪除志工 ${l.user?.name||"此人"} 的報名紀錄嗎？`,cancel:{label:"取消",color:"grey",flat:!0},ok:{label:"確定刪除",color:"negative",flat:!0},persistent:!0}).onOk(async()=>{try{await ke(l._id),f.notify({color:"positive",message:"紀錄已成功刪除",icon:"check"}),await I(),P("refresh")}catch(e){console.error(e);const s=e.response?.data?.message||"刪除失敗";f.notify({color:"negative",message:s,icon:"error"})}})};return J(()=>h.modelValue,l=>{l&&I()}),J(()=>h.event,l=>{l&&(x.value=l.approvedCount||0)},{immediate:!0}),(l,e)=>(o(),u(de,{"model-value":C.modelValue,"onUpdate:modelValue":N,"full-width":"",onHide:e[0]||(e[0]=s=>l.$emit("hide"))},{default:a(()=>[t(O,null,{default:a(()=>[t(B,{class:"row items-center"},{default:a(()=>[c("div",$e,"審核名單："+r(C.event?.title),1),t(le),C.event?(o(),m("div",Ce,[e[1]||(e[1]=n(" 當前名額： ",-1)),t(Q,{color:x.value>=C.event.maxParticipants?"negative":"primary",class:"q-pa-sm"},{default:a(()=>[n(r(x.value)+" / "+r(C.event.maxParticipants),1)]),_:1},8,["color"]),x.value>=C.event.maxParticipants?(o(),m("span",we,"已額滿")):_("",!0)])):_("",!0),ie(t(g,{icon:"close",flat:"",round:"",dense:""},null,512),[[be]])]),_:1}),j.value?(o(),u(B,{key:0,class:"text-center"},{default:a(()=>[t(oe,{size:"40px",color:"primary"})]),_:1})):(o(),u(B,{key:1,class:"q-pa-none"},{default:a(()=>[q.value.length===0?(o(),m("div",Qe,[t(p,{name:"people_outline",size:"40px"}),e[2]||(e[2]=c("div",{class:"q-mt-sm"},"目前尚無人報名",-1))])):_("",!0),$(f).screen.lt.md?(o(),m("div",De,[(o(!0),m(R,null,A(q.value,s=>(o(),u(O,{key:s._id,flat:"",bordered:""},{default:a(()=>[t(B,{class:"q-pb-sm"},{default:a(()=>[c("div",Ve,[t(L,{size:"48px"},{default:a(()=>[c("img",{src:s.user?.avatar||`https://api.dicebear.com/9.x/thumbs/svg?seed=${s.user?.account}`},null,8,Ee)]),_:2},1024),c("div",ze,[c("div",{class:"text-weight-bold text-primary cursor-pointer ellipsis",onClick:d=>l.$router.push(`/admin/volunteers/${s.user._id}`)},[n(r(s.user?.name||"無名志工")+" ",1),t(b,null,{default:a(()=>[...e[3]||(e[3]=[n("查看志工詳細資料",-1)])]),_:1})],8,je),c("div",Re,r(s.user?.account),1)]),c("div",Ae,[t(Q,{color:$(ae)(s.matchScore),"text-color":"white"},{default:a(()=>[n(" 契合度 "+r(s.matchScore||0)+"% ",1)]),_:2},1032,["color"])])])]),_:2},1024),t(te,{dense:"",separator:""},{default:a(()=>[t(E,null,{default:a(()=>[t(v,{avatar:""},{default:a(()=>[t(p,{name:"phone",size:"xs",color:"grey-7"})]),_:1}),t(v,null,{default:a(()=>[n(r(s.user?.phone||"未填寫電話"),1)]),_:2},1024)]),_:2},1024),t(E,null,{default:a(()=>[t(v,{avatar:""},{default:a(()=>[t(p,{name:"psychology",size:"xs",color:"grey-7"})]),_:1}),t(v,null,{default:a(()=>[s.user?.skills?.length>0?(o(),m("div",Pe,[(o(!0),m(R,null,A(s.user.skills,d=>(o(),u(xe,{key:d,size:"sm",color:"blue-1","text-color":"blue-8"},{default:a(()=>[n(r(d),1)]),_:2},1024))),128))])):(o(),m("div",Se,"無技能"))]),_:2},1024)]),_:2},1024),s.note?(o(),u(E,{key:0},{default:a(()=>[t(v,null,{default:a(()=>[t(k,{class:"text-blue-9 text-caption bg-blue-1 q-pa-xs rounded-borders"},{default:a(()=>[t(p,{name:"sticky_note_2"}),n(" 備註："+r(s.note),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):_("",!0)]),_:2},1024),t(T),t(B,{class:"row items-center justify-between bg-grey-1 q-py-sm"},{default:a(()=>[t(Q,{color:U(s.status),class:"q-pa-sm"},{default:a(()=>[n(r(Y(s.status)),1)]),_:2},1032,["color"]),s.status==="approved"?(o(),m("div",Ye,[e[4]||(e[4]=c("div",{class:"text-caption"},"出席",-1)),t(K,{modelValue:s.attended,"onUpdate:modelValue":[d=>s.attended=d,d=>V(s,d)],color:"green",dense:""},null,8,["modelValue","onUpdate:modelValue"])])):_("",!0)]),_:2},1024),t(F,{align:"right",class:"q-gutter-xs"},{default:a(()=>[s.status!=="approved"&&s.status!=="cancelled"&&s.status!=="rejected"?(o(),u(g,{key:0,color:"positive",label:"錄取",dense:"",unelevated:"",class:"q-px-sm",onClick:d=>D(s._id,"approved")},null,8,["onClick"])):_("",!0),s.status!=="rejected"&&s.status!=="cancelled"?(o(),u(g,{key:1,color:"negative",label:"拒絕",dense:"",unelevated:"",class:"q-px-sm",disable:s.attended,onClick:d=>D(s._id,"rejected")},{default:a(()=>[s.attended?(o(),u(b,{key:0},{default:a(()=>[...e[5]||(e[5]=[n("請先取消出席狀態再拒絕",-1)])]),_:1})):_("",!0)]),_:2},1032,["disable","onClick"])):_("",!0),t(g,{flat:"",round:"",dense:"","text-color":s.attended||s.status==="approved"?"grey-4":"negative",icon:"delete_outline",onClick:d=>i(s)},{default:a(()=>[s.attended?(o(),u(b,{key:0},{default:a(()=>[...e[6]||(e[6]=[n("請先取消出席狀態再刪除",-1)])]),_:1})):s.status==="approved"?(o(),u(b,{key:1},{default:a(()=>[...e[7]||(e[7]=[n("已錄取紀錄不可刪除，請先改為拒絕",-1)])]),_:1})):(o(),u(b,{key:2},{default:a(()=>[...e[8]||(e[8]=[n("刪除此申請紀錄",-1)])]),_:1}))]),_:2},1032,["text-color","onClick"])]),_:2},1024)]),_:2},1024))),128))])):(o(),u(te,{key:2,bordered:"",separator:""},{default:a(()=>[(o(!0),m(R,null,A(q.value,s=>(o(),u(E,{key:s._id},{default:a(()=>[t(v,{avatar:""},{default:a(()=>[t(L,{size:"48px"},{default:a(()=>[c("img",{src:s.user?.avatar||`https://api.dicebear.com/9.x/thumbs/svg?seed=${s.user?.account}`},null,8,Ue)]),_:2},1024)]),_:2},1024),t(v,null,{default:a(()=>[t(k,{class:"text-weight-bold"},{default:a(()=>[c("span",{class:"text-primary cursor-pointer",style:{"text-decoration":"underline"},onClick:d=>l.$router.push(`/admin/volunteers/${s.user._id}`)},[n(r(s.user?.name||"無名志工")+" ",1),t(b,null,{default:a(()=>[...e[9]||(e[9]=[n("查看志工詳細資料",-1)])]),_:1})],8,Ie),t(Q,{color:$(ae)(s.matchScore),"text-color":"white",class:"q-ml-sm"},{default:a(()=>[n(" 契合度 "+r(s.matchScore||0)+"% ",1)]),_:2},1032,["color"])]),_:2},1024),t(k,{caption:""},{default:a(()=>[n(" 帳號："+r(s.user?.account)+" | 電話："+r(s.user?.phone||"未填寫")+" | 技能："+r(s.user?.skills?.length>0?s.user.skills.join(", "):"無"),1)]),_:2},1024),s.note?(o(),u(k,{key:0,class:"text-blue-9 text-caption q-mt-xs bg-blue-1 q-pa-xs rounded-borders",style:{display:"inline-block"}},{default:a(()=>[t(p,{name:"sticky_note_2"}),n(" 備註："+r(s.note),1)]),_:2},1024)):_("",!0)]),_:2},1024),s.status==="approved"?(o(),u(v,{key:0,side:""},{default:a(()=>[c("div",Me,[e[10]||(e[10]=c("div",{class:"text-caption q-mb-xs"},"出席狀態",-1)),t(K,{modelValue:s.attended,"onUpdate:modelValue":[d=>s.attended=d,d=>V(s,d)],color:"green"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)):_("",!0),t(v,{side:""},{default:a(()=>[c("div",Be,[s.status!=="approved"&&s.status!=="cancelled"&&s.status!=="rejected"?(o(),u(g,{key:0,color:"positive",label:"錄取",dense:"",unelevated:"",class:"q-px-sm",onClick:d=>D(s._id,"approved")},null,8,["onClick"])):_("",!0),s.status!=="rejected"&&s.status!=="cancelled"?(o(),u(g,{key:1,color:"negative",label:"拒絕",dense:"",unelevated:"",class:"q-px-sm",disable:s.attended,onClick:d=>D(s._id,"rejected")},{default:a(()=>[s.attended?(o(),u(b,{key:0},{default:a(()=>[...e[11]||(e[11]=[n("請先取消出席狀態再拒絕",-1)])]),_:1})):_("",!0)]),_:2},1032,["disable","onClick"])):_("",!0),t(Q,{color:U(s.status),class:"q-pa-sm"},{default:a(()=>[n(r(Y(s.status)),1)]),_:2},1032,["color"]),t(g,{flat:"",round:"",dense:"",color:"grey-5","text-color":s.attended||s.status==="approved"?"grey-4":"negative",icon:"delete_outline",onClick:d=>i(s)},{default:a(()=>[s.attended?(o(),u(b,{key:0},{default:a(()=>[...e[12]||(e[12]=[n("請先取消出席狀態再刪除",-1)])]),_:1})):s.status==="approved"?(o(),u(b,{key:1},{default:a(()=>[...e[13]||(e[13]=[n("已錄取紀錄不可刪除，請先改為拒絕",-1)])]),_:1})):(o(),u(b,{key:2},{default:a(()=>[...e[14]||(e[14]=[n("刪除此申請紀錄",-1)])]),_:1}))]),_:2},1032,["text-color","onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1}))]),_:1})]),_:1},8,["model-value"]))}},Oe={class:"row items-center q-mb-md"},Le={key:0,class:"text-center q-pa-xl"},Ne={key:0,class:"text-center text-grey q-pa-md"},Fe={key:1,class:"row q-col-gutter-md"},He=["src"],We={class:"text-caption text-grey"},Xe={key:0,class:"text-center text-grey q-pa-md"},Ze={key:1,class:"row q-col-gutter-md"},Ge=["src"],Je={class:"text-caption text-grey"},Ke={key:0,class:"text-center text-grey q-pa-md"},et={key:1,class:"row q-col-gutter-md"},tt=["src"],st={class:"text-caption text-grey"},at={__name:"AdminEventsPage",setup(C){const z=ne(),h=ue(),P=me(),f=w([]),S=w(!0),q=w(!1),j=w(null),x=w("open"),N=W(()=>{const i=y();return f.value.filter(l=>{const e=y(l.registrationDeadline).endOf("day"),s=y(l.serviceDateRange?.end);return e.isAfter(i)&&s.isAfter(i)})}),Y=W(()=>{const i=y();return f.value.filter(l=>{const e=y(l.registrationDeadline).endOf("day"),s=y(l.serviceDateRange?.end);return e.isBefore(i)&&s.isAfter(i)}).sort((l,e)=>y(l.serviceDateRange?.start).diff(y(e.serviceDateRange?.start)))}),U=W(()=>{const i=y();return f.value.filter(l=>!y(l.serviceDateRange?.end).isAfter(i)).sort((l,e)=>y(e.serviceDateRange?.end).diff(y(l.serviceDateRange?.end)))}),I=()=>{h.query.reviewEventId&&P.replace({query:{...h.query,reviewEventId:void 0}})},D=async()=>{const i=h.query.reviewEventId;if(!i)return;let l=f.value.find(e=>e._id===i);if(!l)try{const{data:e}=await pe(i);l=e.result}catch(e){console.error("無法讀取指定活動",e)}l&&await V(l)},M=async()=>{try{const i=typeof ee=="function"?ee:ye,{data:l}=await i();f.value=l.result||[],await D()}catch(i){console.error("Fetch Events Error:",i),z.notify({color:"negative",message:"讀取活動失敗"})}finally{S.value=!1}},V=async i=>{j.value=i,q.value=!0};return J(()=>h.query.reviewEventId,i=>{i&&D()}),ce(M),(i,l)=>(o(),u(_e,{class:"q-pa-md"},{default:a(()=>[c("div",Oe,[l[3]||(l[3]=c("div",{class:"text-h5 text-bold"},"活動報名管理",-1)),t(le),t(g,{color:"primary",icon:"add",label:$(z).screen.gt.sm?"發布新活動":"",outline:"",to:"/admin/events/create"},null,8,["label"])]),t(ve,{modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value=e),dense:"",class:fe(["text-grey",{"no-wrap":$(z).screen.lt.md}]),"active-color":"primary","indicator-color":"primary",align:$(z).screen.gt.sm?"justify":"left","narrow-indicator":""},{default:a(()=>[t(X,{name:"open",label:"開放中活動",icon:"event_available"}),t(X,{name:"closed",label:"報名已截止 / 準備中",icon:"event_busy"}),t(X,{name:"archived",label:"已結束 / 歷史活動",icon:"history"})]),_:1},8,["modelValue","class","align"]),t(T),S.value?(o(),m("div",Le,[t(oe,{color:"primary",size:"40px"})])):(o(),u(ge,{key:1,modelValue:x.value,"onUpdate:modelValue":l[1]||(l[1]=e=>x.value=e),animated:"",class:"bg-transparent q-mt-md"},{default:a(()=>[t(Z,{name:"open",class:"q-pa-none"},{default:a(()=>[N.value.length===0?(o(),m("div",Ne," 尚無開放中活動 ")):(o(),m("div",Fe,[(o(!0),m(R,null,A(N.value,e=>(o(),m("div",{key:e._id,class:"col-12"},[t(O,{flat:"",bordered:"",class:"shadow-1"},{default:a(()=>[t(E,null,{default:a(()=>[t(v,{avatar:""},{default:a(()=>[t(L,{rounded:"",size:"80px"},{default:a(()=>[c("img",{src:e.imgUrl||`https://picsum.photos/seed/${e._id}/800/600`,style:{"object-fit":"cover"}},null,8,He)]),_:2},1024)]),_:2},1024),t(v,null,{default:a(()=>[t(k,{class:"text-bold text-h6 cursor-pointer",onClick:s=>i.$router.push(`/events/${e._id}`)},{default:a(()=>[n(r(e.title),1)]),_:2},1032,["onClick"]),t(k,{caption:"",class:"q-mt-xs"},{default:a(()=>[t(p,{name:"event",size:"xs"}),n(" "+r($(G)(e.serviceDateRange?.start,"YYYY-MM-DD"))+" ",1),l[4]||(l[4]=c("span",{class:"q-mx-xs"},"|",-1)),t(p,{name:"place",size:"xs"}),n(" "+r(e.location),1)]),_:2},1024)]),_:2},1024),t(v,{side:""},{default:a(()=>[t(Q,{color:e.approvedCount>=e.maxParticipants?"negative":"positive",label:e.approvedCount>=e.maxParticipants?"已額滿":"報名中",class:"q-mb-xs"},null,8,["color","label"]),c("div",We,r(e.approvedCount)+" / "+r(e.maxParticipants),1)]),_:2},1024)]),_:2},1024),t(T),t(F,{align:"right"},{default:a(()=>[t(g,{dense:"",flat:"",color:"primary",icon:"people",label:"審核",onClick:s=>V(e)},null,8,["onClick"]),t(g,{dense:"",flat:"",color:"secondary",icon:"edit",label:"編輯",to:`/admin/events/edit/${e._id}`},null,8,["to"])]),_:2},1024)]),_:2},1024)]))),128))]))]),_:1}),t(Z,{name:"closed",class:"q-pa-none"},{default:a(()=>[Y.value.length===0?(o(),m("div",Xe," 尚無此類活動 ")):(o(),m("div",Ze,[(o(!0),m(R,null,A(Y.value,e=>(o(),m("div",{key:e._id,class:"col-12"},[t(O,{flat:"",bordered:"",class:"shadow-1 bg-orange-1"},{default:a(()=>[t(E,null,{default:a(()=>[t(v,{avatar:""},{default:a(()=>[t(L,{rounded:"",size:"80px"},{default:a(()=>[c("img",{src:e.imgUrl||`https://picsum.photos/seed/${e._id}/800/600`,style:{"object-fit":"cover"}},null,8,Ge)]),_:2},1024)]),_:2},1024),t(v,null,{default:a(()=>[t(k,{class:"text-bold text-h6 cursor-pointer",onClick:s=>i.$router.push(`/events/${e._id}`)},{default:a(()=>[n(r(e.title),1)]),_:2},1032,["onClick"]),t(k,{caption:"",class:"q-mt-xs"},{default:a(()=>[t(p,{name:"event",size:"xs"}),n(" "+r($(G)(e.serviceDateRange?.start,"YYYY-MM-DD"))+" ",1),l[5]||(l[5]=c("span",{class:"q-mx-xs"},"|",-1)),t(p,{name:"place",size:"xs"}),n(" "+r(e.location),1)]),_:2},1024)]),_:2},1024),t(v,{side:""},{default:a(()=>[t(Q,{color:"orange",label:"報名截止",class:"q-mb-xs"}),c("div",Je,r(e.approvedCount)+" / "+r(e.maxParticipants),1)]),_:2},1024)]),_:2},1024),t(T),t(F,{align:"right"},{default:a(()=>[t(g,{dense:"",flat:"",color:"primary",icon:"people",label:"審核/點名",onClick:s=>V(e)},null,8,["onClick"]),t(g,{dense:"",flat:"",color:"secondary",icon:"edit",label:"編輯",to:`/admin/events/edit/${e._id}`},null,8,["to"])]),_:2},1024)]),_:2},1024)]))),128))]))]),_:1}),t(Z,{name:"archived",class:"q-pa-none"},{default:a(()=>[U.value.length===0?(o(),m("div",Ke," 尚無歷史活動 ")):(o(),m("div",et,[(o(!0),m(R,null,A(U.value,e=>(o(),m("div",{key:e._id,class:"col-12"},[t(O,{flat:"",bordered:"",class:"shadow-1 bg-grey-2"},{default:a(()=>[t(E,null,{default:a(()=>[t(v,{avatar:""},{default:a(()=>[t(L,{rounded:"",size:"80px"},{default:a(()=>[c("img",{src:e.imgUrl||`https://picsum.photos/seed/${e._id}/800/600`,style:{"object-fit":"cover",filter:"grayscale(100%)"}},null,8,tt)]),_:2},1024)]),_:2},1024),t(v,null,{default:a(()=>[t(k,{class:"text-bold text-h6 text-grey-8"},{default:a(()=>[n(r(e.title),1)]),_:2},1024),t(k,{caption:"",class:"q-mt-xs"},{default:a(()=>[t(p,{name:"event",size:"xs"}),n(" "+r($(G)(e.serviceDateRange?.start,"YYYY-MM-DD"))+" ",1),l[6]||(l[6]=c("span",{class:"q-mx-xs"},"|",-1)),t(p,{name:"place",size:"xs"}),n(" "+r(e.location),1)]),_:2},1024)]),_:2},1024),t(v,{side:""},{default:a(()=>[t(Q,{color:"grey-7",label:"已結案",class:"q-mb-xs"}),c("div",st,r(e.approvedCount)+" / "+r(e.maxParticipants),1)]),_:2},1024)]),_:2},1024),t(T),t(F,{align:"right"},{default:a(()=>[t(g,{dense:"",flat:"",color:"primary",icon:"people",label:"查看名單",onClick:s=>V(e)},null,8,["onClick"]),t(g,{dense:"",flat:"",color:"grey-7",icon:"visibility",label:"查看內容",to:`/admin/events/edit/${e._id}`},null,8,["to"])]),_:2},1024)]),_:2},1024)]))),128))]))]),_:1})]),_:1},8,["modelValue"])),t(Te,{modelValue:q.value,"onUpdate:modelValue":l[2]||(l[2]=e=>q.value=e),event:j.value,onRefresh:M,onHide:I},null,8,["modelValue","event"])]),_:1}))}},Vt=qe(at,[["__scopeId","data-v-ed2f4c3c"]]);export{Vt as default};

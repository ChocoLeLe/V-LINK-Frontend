import{g as Oe,r as K,a as p,aD as Ft,an as zt,ax as Fn,h,c as Fe,aE as zn,ab as Vt,aF as Vn,aG as $n,aH as Bn,aI as Pn,aJ as Et,aK as ln,aL as An,aM as Ht,aN as In,aO as jn,aP as on,f as gt,k as yt,aQ as Nn,aB as $e,aR as Rn,aS as rn,aT as un,aU as Ln,ap as sn,aV as En,w as pe,s as mt,b as pt,ad as cn,X as ee,aq as Un,ao as Qn,aW as Kn,v as Ue,F as Zn,aX as dn,aY as Wn,ac as Xn,t as $t,a1 as Ye,aZ as fn,a_ as Jn,o as Gn,a$ as ea,J as Ut,M as Qt,N as rt,O as G,W,S as z,a9 as qe,V as Kt,T as kt,as as Zt,a0 as ta}from"./index-Cp7Hh5hQ.js";import{Q as na}from"./QChip-DQbU_5ZG.js";import{h as aa,p as N,c as la}from"./format-DyQxkAtJ.js";import{Q as oa}from"./QImg-BAOybexc.js";import{Q as vn}from"./QTooltip-Do3A-tKd.js";import{u as ia}from"./use-render-cache-DLxPkVnQ.js";import{Q as mn}from"./QMenu-BEPb-hGt.js";import{u as ra,a as ua}from"./position-engine-CEaxuUMw.js";import{T as sa}from"./TouchPan-B6_LzjG6.js";import{Q as ut}from"./QSelect-C6uRbRqK.js";import{Q as ca}from"./QBtnGroup-DfgYBRM4.js";import{b as Wt,a as da,u as fa}from"./use-quasar-5-QsCPJE.js";import{u as va,a as ma,b as ha}from"./use-fullscreen-906qDx6P.js";import{Q as ga}from"./QForm-mOgj6XXx.js";import{C as tt}from"./ClosePopup-CaY4OfJP.js";import{a as ya,g as pa,b as ba,c as Da,u as wa}from"./upload-2FOtVMwy.js";function Re(e,t,a,l){const i=[];return e.forEach(o=>{l(o)===!0?i.push(o):t.push({failedPropValidation:a,file:o})}),i}function st(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),zt(e)}const Ma={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Sa=["rejected"];function ka({editable:e,dnd:t,getFileInput:a,addFilesToQueue:l}){const{props:i,emit:o,proxy:d}=Oe(),f=K(null),b=p(()=>i.accept!==void 0?i.accept.split(",").map(s=>(s=s.trim(),s==="*"?"*/":(s.endsWith("/*")&&(s=s.slice(0,s.length-1)),s.toUpperCase()))):null),O=p(()=>parseInt(i.maxFiles,10)),m=p(()=>parseInt(i.maxTotalSize,10));function x(s){if(e.value)if(s!==Object(s)&&(s={target:null}),s.target?.matches('input[type="file"]')===!0)s.clientX===0&&s.clientY===0&&Ft(s);else{const _=a();_!==s.target&&_?.click(s)}}function j(s){e.value&&s&&l(null,s)}function F(s,_,u,T){let I=Array.from(_||s.target.files);const te=[],U=()=>{te.length!==0&&o("rejected",te)};if(i.accept!==void 0&&b.value.indexOf("*/")===-1&&(I=Re(I,te,"accept",R=>b.value.some(Z=>R.type.toUpperCase().startsWith(Z)||R.name.toUpperCase().endsWith(Z))),I.length===0))return U();if(i.maxFileSize!==void 0){const R=parseInt(i.maxFileSize,10);if(I=Re(I,te,"max-file-size",Z=>Z.size<=R),I.length===0)return U()}if(i.multiple!==!0&&I.length!==0&&(I=[I[0]]),I.forEach(R=>{R.__key=R.webkitRelativePath+R.lastModified+R.name+R.size}),T===!0){const R=u.map(Z=>Z.__key);I=Re(I,te,"duplicate",Z=>R.includes(Z.__key)===!1)}if(I.length===0)return U();if(i.maxTotalSize!==void 0){let R=T===!0?u.reduce((Z,ne)=>Z+ne.size,0):0;if(I=Re(I,te,"max-total-size",Z=>(R+=Z.size,R<=m.value)),I.length===0)return U()}if(typeof i.filter=="function"){const R=i.filter(I);I=Re(I,te,"filter",Z=>R.includes(Z))}if(i.maxFiles!==void 0){let R=T===!0?u.length:0;if(I=Re(I,te,"max-files",()=>(R++,R<=O.value)),I.length===0)return U()}if(U(),I.length!==0)return I}function L(s){st(s),t.value!==!0&&(t.value=!0)}function C(s){zt(s),(s.relatedTarget!==null||Fn.is.safari!==!0?s.relatedTarget!==f.value:document.elementsFromPoint(s.clientX,s.clientY).includes(f.value)===!1)===!0&&(t.value=!1)}function w(s){st(s);const _=s.dataTransfer.files;_.length!==0&&l(null,_),t.value=!1}function M(s){if(t.value===!0)return h("div",{ref:f,class:`q-${s}__dnd absolute-full`,onDragenter:st,onDragover:st,onDragleave:C,onDrop:w})}return Object.assign(d,{pickFiles:x,addFiles:j}),{pickFiles:x,addFiles:j,onDragover:L,onDragleave:C,processFiles:F,getDndNode:M,maxFilesNumber:O,maxTotalSizeNumber:m}}const _a=Fe({name:"QFile",inheritAttrs:!1,props:{...Vn,...Vt,...Ma,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...zn,...Sa],setup(e,{slots:t,emit:a,attrs:l}){const{proxy:i}=Oe(),o=$n(),d=K(null),f=K(!1),b=Bn(e),{pickFiles:O,onDragover:m,onDragleave:x,processFiles:j,getDndNode:F}=ka({editable:o.editable,dnd:f,getFileInput:De,addFilesToQueue:ce}),L=Pn(e),C=p(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),w=p(()=>Et(C.value)),M=p(()=>C.value.map(Y=>Y.name).join(", ")),s=p(()=>aa(C.value.reduce((Y,Q)=>Y+Q.size,0))),_=p(()=>({totalSize:s.value,filesNumber:C.value.length,maxFiles:e.maxFiles})),u=p(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:b.value,...l,id:o.targetUid.value,disabled:o.editable.value!==!0})),T=p(()=>"q-file q-field--auto-height"+(f.value===!0?" q-file--dnd":"")),I=p(()=>e.multiple===!0&&e.append===!0);function te(Y){const Q=C.value.slice();Q.splice(Y,1),R(Q)}function U(Y){const Q=C.value.indexOf(Y);Q!==-1&&te(Q)}function R(Y){a("update:modelValue",e.multiple===!0?Y:Y[0])}function Z(Y){Y.keyCode===13&&Ht(Y)}function ne(Y){(Y.keyCode===13||Y.keyCode===32)&&O(Y)}function De(){return d.value}function ce(Y,Q){const ie=j(Y,Q,C.value,I.value),we=De();we!=null&&(we.value=""),ie!==void 0&&((e.multiple===!0?e.modelValue&&ie.every(de=>C.value.includes(de)):e.modelValue===ie[0])||R(I.value===!0?C.value.concat(ie):ie))}function se(){return[h("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function re(){if(t.file!==void 0)return C.value.length===0?se():C.value.map((Q,ie)=>t.file({index:ie,file:Q,ref:this}));if(t.selected!==void 0)return C.value.length===0?se():t.selected({files:C.value,ref:this});if(e.useChips===!0)return C.value.length===0?se():C.value.map((Q,ie)=>h(na,{key:"file-"+ie,removable:o.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{te(ie)}},()=>h("span",{class:"ellipsis",textContent:Q.name})));const Y=e.displayValue!==void 0?e.displayValue:M.value;return Y.length!==0?[h("div",{class:e.inputClass,style:e.inputStyle,textContent:Y})]:se()}function he(){const Y={ref:d,...u.value,...L.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:ce};return e.multiple===!0&&(Y.multiple=!0),h("input",Y)}return Object.assign(o,{fieldClass:T,emitValue:R,hasValue:w,inputRef:d,innerValue:C,floatingLabel:p(()=>w.value===!0||Et(e.displayValue)),computedCounter:p(()=>{if(e.counterLabel!==void 0)return e.counterLabel(_.value);const Y=e.maxFiles;return`${C.value.length}${Y!==void 0?" / "+Y:""} (${s.value})`}),getControlChild:()=>F("file"),getControl:()=>{const Y={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return o.editable.value===!0&&Object.assign(Y,{onDragover:m,onDragleave:x,onKeydown:Z,onKeyup:ne}),h("div",Y,[he()].concat(re()))}}),Object.assign(i,{removeAtIndex:te,removeFile:U,getNativeElement:()=>d.value}),ln(i,"nativeEl",()=>d.value),An(o)}}),Ca='<g transform="translate(-20,-20)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="90 50 50" to="0 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g><g transform="translate(20,20) rotate(15 50 50)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="90 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g>',xa=Fe({name:"QSpinnerGears",props:In,setup(e){const{cSize:t,classes:a}=jn(e);return()=>h("svg",{class:a.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:Ca})}}),qa=Fe({name:"QInnerLoading",props:{...gt,...on,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:t}){const a=Oe(),l=yt(e,a.proxy.$q),{transitionProps:i,transitionStyle:o}=Nn(e),d=p(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(l.value===!0?" q-inner-loading--dark":"")),f=p(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function b(){const m=[h(Rn,{size:e.size,color:e.color})];return e.label!==void 0&&m.push(h("div",{class:f.value,style:e.labelStyle},[e.label])),m}function O(){return e.showing===!0?h("div",{class:d.value,style:o.value},t.default!==void 0?t.default():b()):null}return()=>h($e,i.value,O)}}),He=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ta(e,t,a){return Object.prototype.toString.call(e)==="[object Date]"&&(a=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),Fa(Bt(e,t,a))}function Xt(e,t,a){return gn(Oa(e,t,a))}function Ya(e){return Ha(e)===0}function dt(e,t){return t<=6?31:t<=11||Ya(e)?30:29}function Ha(e){const t=He.length;let a=He[0],l,i,o,d,f;if(e<a||e>=He[t-1])throw new Error("Invalid Jalaali year "+e);for(f=1;f<t&&(l=He[f],i=l-a,!(e<l));f+=1)a=l;return d=e-a,i-d<6&&(d=d-i+J(i+4,33)*33),o=be(be(d+1,33)-1,4),o===-1&&(o=4),o}function hn(e,t){const a=He.length,l=e+621;let i=-14,o=He[0],d,f,b,O,m;if(e<o||e>=He[a-1])throw new Error("Invalid Jalaali year "+e);for(m=1;m<a&&(d=He[m],f=d-o,!(e<d));m+=1)i=i+J(f,33)*8+J(be(f,33),4),o=d;O=e-o,i=i+J(O,33)*8+J(be(O,33)+3,4),be(f,33)===4&&f-O===4&&(i+=1);const x=J(l,4)-J((J(l,100)+1)*3,4)-150,j=20+i-x;return t||(f-O<6&&(O=O-f+J(f+4,33)*33),b=be(be(O+1,33)-1,4),b===-1&&(b=4)),{leap:b,gy:l,march:j}}function Oa(e,t,a){const l=hn(e,!0);return Bt(l.gy,3,l.march)+(t-1)*31-J(t,7)*(t-7)+a-1}function Fa(e){const t=gn(e).gy;let a=t-621,l,i,o;const d=hn(a,!1),f=Bt(t,3,d.march);if(o=e-f,o>=0){if(o<=185)return i=1+J(o,31),l=be(o,31)+1,{jy:a,jm:i,jd:l};o-=186}else a-=1,o+=179,d.leap===1&&(o+=1);return i=7+J(o,30),l=be(o,30)+1,{jy:a,jm:i,jd:l}}function Bt(e,t,a){let l=J((e+J(t-8,6)+100100)*1461,4)+J(153*be(t+9,12)+2,5)+a-34840408;return l=l-J(J(e+100100+J(t-8,6),100)*3,4)+752,l}function gn(e){let t=4*e+139361631;t=t+J(J(4*e+183187720,146097)*3,4)*4-3908;const a=J(be(t,1461),4)*5+308,l=J(be(a,153),5)+1,i=be(J(a,153),12)+1;return{gy:J(t,1461)-100100+J(8-i,6),gm:i,gd:l}}function J(e,t){return~~(e/t)}function be(e,t){return e-~~(e/t)*t}const za=["gregorian","persian"],ht={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>za.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},yn=["update:modelValue"];function xe(e){return e.year+"/"+N(e.month)+"/"+N(e.day)}function pn(e,t){const a=p(()=>e.disable!==!0&&e.readonly!==!0),l=p(()=>a.value===!0?0:-1),i=p(()=>{const f=[];return e.color!==void 0&&f.push(`bg-${e.color}`),e.textColor!==void 0&&f.push(`text-${e.textColor}`),f.join(" ")});function o(){return e.locale!==void 0?{...t.lang.date,...e.locale}:t.lang.date}function d(f){const b=new Date,O=f===!0?null:0;if(e.calendar==="persian"){const m=Ta(b);return{year:m.jy,month:m.jm,day:m.jd}}return{year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate(),hour:O,minute:O,second:O,millisecond:O}}return{editable:a,tabindex:l,headerClass:i,getLocale:o,getCurrentDate:d}}const bn=864e5,Va=36e5,Ot=6e4,Dn="YYYY-MM-DDTHH:mm:ss.SSSZ",$a=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Ba=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,_t={};function Pa(e,t){const a="("+t.days.join("|")+")",l=e+a;if(_t[l]!==void 0)return _t[l];const i="("+t.daysShort.join("|")+")",o="("+t.months.join("|")+")",d="("+t.monthsShort.join("|")+")",f={};let b=0;const O=e.replace(Ba,x=>{switch(b++,x){case"YY":return f.YY=b,"(-?\\d{1,2})";case"YYYY":return f.YYYY=b,"(-?\\d{1,4})";case"M":return f.M=b,"(\\d{1,2})";case"Mo":return f.M=b++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return f.M=b,"(\\d{2})";case"MMM":return f.MMM=b,d;case"MMMM":return f.MMMM=b,o;case"D":return f.D=b,"(\\d{1,2})";case"Do":return f.D=b++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return f.D=b,"(\\d{2})";case"H":return f.H=b,"(\\d{1,2})";case"HH":return f.H=b,"(\\d{2})";case"h":return f.h=b,"(\\d{1,2})";case"hh":return f.h=b,"(\\d{2})";case"m":return f.m=b,"(\\d{1,2})";case"mm":return f.m=b,"(\\d{2})";case"s":return f.s=b,"(\\d{1,2})";case"ss":return f.s=b,"(\\d{2})";case"S":return f.S=b,"(\\d{1})";case"SS":return f.S=b,"(\\d{2})";case"SSS":return f.S=b,"(\\d{3})";case"A":return f.A=b,"(AM|PM)";case"a":return f.a=b,"(am|pm)";case"aa":return f.aa=b,"(a\\.m\\.|p\\.m\\.)";case"ddd":return i;case"dddd":return a;case"Q":case"d":case"E":return"(\\d{1})";case"do":return b++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return b++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return b++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return f.Z=b,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return f.ZZ=b,"(Z|[+-]\\d{2}\\d{2})";case"X":return f.X=b,"(-?\\d+)";case"x":return f.x=b,"(-?\\d{4,})";default:return b--,x[0]==="["&&(x=x.substring(1,x.length-1)),x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),m={map:f,regex:new RegExp("^"+O)};return _t[l]=m,m}function wn(e,t){return e!==void 0?e:t!==void 0?t.date:Ln.date}function Jt(e,t=""){const a=e>0?"-":"+",l=Math.abs(e),i=Math.floor(l/60),o=l%60;return a+N(i)+t+N(o)}function Aa(e,t,a){let l=e.getFullYear(),i=e.getMonth();const o=e.getDate();return t.year!==void 0&&(l+=a*t.year,delete t.year),t.month!==void 0&&(i+=a*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(l),e.setMonth(i),e.setDate(Math.min(o,It(e))),t.date!==void 0&&(e.setDate(e.getDate()+a*t.date),delete t.date),e}function Ia(e,t,a){const l=t.year!==void 0?t.year:e[`get${a}FullYear`](),i=t.month!==void 0?t.month-1:e[`get${a}Month`](),o=new Date(l,i+1,0).getDate(),d=Math.min(o,t.date!==void 0?t.date:e[`get${a}Date`]());return e[`set${a}Date`](1),e[`set${a}Month`](2),e[`set${a}FullYear`](l),e[`set${a}Month`](i),e[`set${a}Date`](d),delete t.year,delete t.month,delete t.date,e}function Pt(e,t,a){const l=Mn(t),i=new Date(e),o=l.year!==void 0||l.month!==void 0||l.date!==void 0?Aa(i,l,a):i;for(const d in l){const f=la(d);o[`set${f}`](o[`get${f}`]()+a*l[d])}return o}function Mn(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function Sn(e,t,a){const l=Mn(t),i=a===!0?"UTC":"",o=new Date(e),d=l.year!==void 0||l.month!==void 0||l.date!==void 0?Ia(o,l,i):o;for(const f in l){const b=f.charAt(0).toUpperCase()+f.slice(1);d[`set${i}${b}`](l[f])}return d}function ja(e,t,a){const l=Qe(e,t,a),i=new Date(l.year,l.month===null?null:l.month-1,l.day===null?1:l.day,l.hour,l.minute,l.second,l.millisecond),o=i.getTimezoneOffset();return l.timezoneOffset===null||l.timezoneOffset===o?i:Pt(i,{minutes:l.timezoneOffset-o},1)}function Qe(e,t,a,l,i){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(i!==void 0&&Object.assign(o,i),e==null||e===""||typeof e!="string")return o;t===void 0&&(t=Dn);const d=wn(a,rn.props),f=d.months,b=d.monthsShort,{regex:O,map:m}=Pa(t,d),x=e.match(O);if(x===null)return o;let j="";if(m.X!==void 0||m.x!==void 0){const F=parseInt(x[m.X!==void 0?m.X:m.x],10);if(isNaN(F)===!0||F<0)return o;const L=new Date(F*(m.X!==void 0?1e3:1));o.year=L.getFullYear(),o.month=L.getMonth()+1,o.day=L.getDate(),o.hour=L.getHours(),o.minute=L.getMinutes(),o.second=L.getSeconds(),o.millisecond=L.getMilliseconds()}else{if(m.YYYY!==void 0)o.year=parseInt(x[m.YYYY],10);else if(m.YY!==void 0){const F=parseInt(x[m.YY],10);o.year=F<0?F:2e3+F}if(m.M!==void 0){if(o.month=parseInt(x[m.M],10),o.month<1||o.month>12)return o}else m.MMM!==void 0?o.month=b.indexOf(x[m.MMM])+1:m.MMMM!==void 0&&(o.month=f.indexOf(x[m.MMMM])+1);if(m.D!==void 0){if(o.day=parseInt(x[m.D],10),o.year===null||o.month===null||o.day<1)return o;const F=l!=="persian"?new Date(o.year,o.month,0).getDate():dt(o.year,o.month);if(o.day>F)return o}m.H!==void 0?o.hour=parseInt(x[m.H],10)%24:m.h!==void 0&&(o.hour=parseInt(x[m.h],10)%12,(m.A&&x[m.A]==="PM"||m.a&&x[m.a]==="pm"||m.aa&&x[m.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),m.m!==void 0&&(o.minute=parseInt(x[m.m],10)%60),m.s!==void 0&&(o.second=parseInt(x[m.s],10)%60),m.S!==void 0&&(o.millisecond=parseInt(x[m.S],10)*10**(3-x[m.S].length)),(m.Z!==void 0||m.ZZ!==void 0)&&(j=m.Z!==void 0?x[m.Z].replace(":",""):x[m.ZZ],o.timezoneOffset=(j[0]==="+"?-1:1)*(60*j.slice(1,3)+1*j.slice(3,5)))}return o.dateHash=N(o.year,4)+"/"+N(o.month)+"/"+N(o.day),o.timeHash=N(o.hour)+":"+N(o.minute)+":"+N(o.second)+j,o}function Na(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function Ra(e,t){return Sn(new Date,e,t)}function La(e){const t=new Date(e).getDay();return t===0?7:t}function ft(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const a=new Date(t.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);const l=t.getTimezoneOffset()-a.getTimezoneOffset();t.setHours(t.getHours()-l);const i=(t-a)/(bn*7);return 1+Math.floor(i)}function Ea(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function Ct(e,t){const a=new Date(e);return t===!0?Ea(a):a.getTime()}function Ua(e,t,a,l={}){const i=Ct(t,l.onlyDate),o=Ct(a,l.onlyDate),d=Ct(e,l.onlyDate);return(d>i||l.inclusiveFrom===!0&&d===i)&&(d<o||l.inclusiveTo===!0&&d===o)}function Qa(e,t){return Pt(e,t,1)}function Ka(e,t){return Pt(e,t,-1)}function Se(e,t,a){const l=new Date(e),i=`set${a===!0?"UTC":""}`;switch(t){case"year":case"years":l[`${i}Month`](0);case"month":case"months":l[`${i}Date`](1);case"day":case"days":case"date":l[`${i}Hours`](0);case"hour":case"hours":l[`${i}Minutes`](0);case"minute":case"minutes":l[`${i}Seconds`](0);case"second":case"seconds":l[`${i}Milliseconds`](0)}return l}function Za(e,t,a){const l=new Date(e),i=`set${a===!0?"UTC":""}`;switch(t){case"year":case"years":l[`${i}Month`](11);case"month":case"months":l[`${i}Date`](It(l));case"day":case"days":case"date":l[`${i}Hours`](23);case"hour":case"hours":l[`${i}Minutes`](59);case"minute":case"minutes":l[`${i}Seconds`](59);case"second":case"seconds":l[`${i}Milliseconds`](999)}return l}function Wa(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(a=>{t=Math.max(t,new Date(a))}),t}function Xa(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(a=>{t=Math.min(t,new Date(a))}),t}function ct(e,t,a){return(e.getTime()-e.getTimezoneOffset()*Ot-(t.getTime()-t.getTimezoneOffset()*Ot))/a}function At(e,t,a="days"){const l=new Date(e),i=new Date(t);switch(a){case"years":case"year":return l.getFullYear()-i.getFullYear();case"months":case"month":return(l.getFullYear()-i.getFullYear())*12+l.getMonth()-i.getMonth();case"days":case"day":case"date":return ct(Se(l,"day"),Se(i,"day"),bn);case"hours":case"hour":return ct(Se(l,"hour"),Se(i,"hour"),Va);case"minutes":case"minute":return ct(Se(l,"minute"),Se(i,"minute"),Ot);case"seconds":case"second":return ct(Se(l,"second"),Se(i,"second"),1e3)}}function vt(e){return At(e,Se(e,"year"),"days")+1}function Ja(e){return un(e)===!0?"date":typeof e=="number"?"number":"string"}function Ga(e,t,a){const l=new Date(e);if(t){const i=new Date(t);if(l<i)return i}if(a){const i=new Date(a);if(l>i)return i}return l}function el(e,t,a){const l=new Date(e),i=new Date(t);if(a===void 0)return l.getTime()===i.getTime();switch(a){case"second":case"seconds":if(l.getSeconds()!==i.getSeconds())return!1;case"minute":case"minutes":if(l.getMinutes()!==i.getMinutes())return!1;case"hour":case"hours":if(l.getHours()!==i.getHours())return!1;case"day":case"days":case"date":if(l.getDate()!==i.getDate())return!1;case"month":case"months":if(l.getMonth()!==i.getMonth())return!1;case"year":case"years":if(l.getFullYear()!==i.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${a}`)}return!0}function It(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function Le(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Gt={YY(e,t,a){const l=this.YYYY(e,t,a)%100;return l>=0?N(l):"-"+N(Math.abs(l))},YYYY(e,t,a){return a??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return Le(e.getMonth()+1)},MM(e){return N(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return Le(this.Q(e))},D(e){return e.getDate()},Do(e){return Le(e.getDate())},DD(e){return N(e.getDate())},DDD(e){return vt(e)},DDDo(e){return Le(vt(e))},DDDD(e){return N(vt(e),3)},d(e){return e.getDay()},do(e){return Le(e.getDay())},dd(e,t){return t.days[e.getDay()].slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return ft(e)},wo(e){return Le(ft(e))},ww(e){return N(ft(e))},H(e){return e.getHours()},HH(e){return N(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return N(this.h(e))},m(e){return e.getMinutes()},mm(e){return N(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return N(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return N(Math.floor(e.getMilliseconds()/10))},SSS(e){return N(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,t,a,l){const i=l??e.getTimezoneOffset();return Jt(i,":")},ZZ(e,t,a,l){const i=l??e.getTimezoneOffset();return Jt(i)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function jt(e,t,a,l,i){if(e!==0&&!e||e===1/0||e===-1/0)return;const o=new Date(e);if(isNaN(o))return;t===void 0&&(t=Dn);const d=wn(a,rn.props);return t.replace($a,(f,b)=>f in Gt?Gt[f](o,d,l,i):b===void 0?f:b.split("\\]").join("]"))}function tl(e){return un(e)===!0?new Date(e.getTime()):e}const en={isValid:Na,extractDate:ja,buildDate:Ra,getDayOfWeek:La,getWeekOfYear:ft,isBetweenDates:Ua,addToDate:Qa,subtractFromDate:Ka,adjustDate:Sn,startOfDate:Se,endOfDate:Za,getMaxDate:Wa,getMinDate:Xa,getDateDiff:At,getDayOfYear:vt,inferDateFormat:Ja,getDateBetween:Ga,isSameDate:el,daysInMonth:It,formatDate:jt,clone:tl},Ce=20,nl=["Calendar","Years","Months"],tn=e=>nl.includes(e),xt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Ee=" â€” ";function Te(e){return e.year+"/"+N(e.month)}const qt=Fe({name:"QDate",props:{...ht,...Vt,...gt,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...ht.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:xt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:xt},navigationMaxYearMonth:{type:String,validator:xt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:tn}},emits:[...yn,"rangeStart","rangeEnd","navigation"],setup(e,{slots:t,emit:a}){const{proxy:l}=Oe(),{$q:i}=l,o=yt(e,i),{getCache:d}=ia(),{tabindex:f,headerClass:b,getLocale:O,getCurrentDate:m}=pn(e,i);let x;const j=sn(e),F=cn(j),L=K(null),C=K(ot()),w=K(O()),M=p(()=>ot()),s=p(()=>O()),_=p(()=>m()),u=K(v(C.value,w.value)),T=K(e.defaultView),I=p(()=>i.lang.rtl===!0?"right":"left"),te=K(I.value),U=K(I.value),R=u.value.year,Z=K(R-R%Ce-(R<0?Ce:0)),ne=K(null),De=p(()=>{const n=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${n} q-date--${n}-${e.minimal===!0?"minimal":"standard"}`+(o.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ce=p(()=>e.color||"primary"),se=p(()=>e.textColor||"white"),re=p(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),he=p(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),Y=p(()=>he.value.filter(n=>typeof n=="string").map(n=>Ge(n,C.value,w.value)).filter(n=>n.dateHash!==null&&n.day!==null&&n.month!==null&&n.year!==null)),Q=p(()=>{const n=r=>Ge(r,C.value,w.value);return he.value.filter(r=>En(r)===!0&&r.from!==void 0&&r.to!==void 0).map(r=>({from:n(r.from),to:n(r.to)})).filter(r=>r.from.dateHash!==null&&r.to.dateHash!==null&&r.from.dateHash<r.to.dateHash)}),ie=p(()=>e.calendar!=="persian"?n=>new Date(n.year,n.month-1,n.day):n=>{const r=Xt(n.year,n.month,n.day);return new Date(r.gy,r.gm-1,r.gd)}),we=p(()=>e.calendar==="persian"?xe:(n,r,c)=>jt(new Date(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond),r===void 0?C.value:r,c===void 0?w.value:c,n.year,n.timezoneOffset)),de=p(()=>Y.value.length+Q.value.reduce((n,r)=>n+1+At(ie.value(r.to),ie.value(r.from)),0)),Me=p(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(ne.value!==null){const c=ne.value.init,S=ie.value(c);return w.value.daysShort[S.getDay()]+", "+w.value.monthsShort[c.month-1]+" "+c.day+Ee+"?"}if(de.value===0)return Ee;if(de.value>1)return`${de.value} ${w.value.pluralDay}`;const n=Y.value[0],r=ie.value(n);return isNaN(r.valueOf())===!0?Ee:w.value.headerTitle!==void 0?w.value.headerTitle(r,n):w.value.daysShort[r.getDay()]+", "+w.value.monthsShort[n.month-1]+" "+n.day}),ge=p(()=>Y.value.concat(Q.value.map(r=>r.from)).sort((r,c)=>r.year-c.year||r.month-c.month)[0]),ke=p(()=>Y.value.concat(Q.value.map(r=>r.to)).sort((r,c)=>c.year-r.year||c.month-r.month)[0]),Be=p(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(de.value===0)return Ee;if(de.value>1){const n=ge.value,r=ke.value,c=w.value.monthsShort;return c[n.month-1]+(n.year!==r.year?" "+n.year+Ee+c[r.month-1]+" ":n.month!==r.month?Ee+c[r.month-1]:"")+" "+r.year}return Y.value[0].year}),g=p(()=>{const n=[i.iconSet.datetime.arrowLeft,i.iconSet.datetime.arrowRight];return i.lang.rtl===!0?n.reverse():n}),y=p(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):w.value.firstDayOfWeek),A=p(()=>{const n=w.value.daysShort,r=y.value;return r>0?n.slice(r,7).concat(n.slice(0,r)):n}),E=p(()=>{const n=u.value;return e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():dt(n.year,n.month)}),fe=p(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),ae=p(()=>{if(e.navigationMinYearMonth===void 0)return null;const n=e.navigationMinYearMonth.split("/");return{year:parseInt(n[0],10),month:parseInt(n[1],10)}}),ue=p(()=>{if(e.navigationMaxYearMonth===void 0)return null;const n=e.navigationMaxYearMonth.split("/");return{year:parseInt(n[0],10),month:parseInt(n[1],10)}}),Ke=p(()=>{const n={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return ae.value!==null&&ae.value.year>=u.value.year&&(n.year.prev=!1,ae.value.year===u.value.year&&ae.value.month>=u.value.month&&(n.month.prev=!1)),ue.value!==null&&ue.value.year<=u.value.year&&(n.year.next=!1,ue.value.year===u.value.year&&ue.value.month<=u.value.month&&(n.month.next=!1)),n}),Pe=p(()=>{const n={};return Y.value.forEach(r=>{const c=Te(r);n[c]===void 0&&(n[c]=[]),n[c].push(r.day)}),n}),at=p(()=>{const n={};return Q.value.forEach(r=>{const c=Te(r.from),S=Te(r.to);if(n[c]===void 0&&(n[c]=[]),n[c].push({from:r.from.day,to:c===S?r.to.day:void 0,range:r}),c<S){let k;const{year:$,month:q}=r.from,V=q<12?{year:$,month:q+1}:{year:$+1,month:1};for(;(k=Te(V))<=S;)n[k]===void 0&&(n[k]=[]),n[k].push({from:void 0,to:k===S?r.to.day:void 0,range:r}),V.month++,V.month>12&&(V.year++,V.month=1)}}),n}),ze=p(()=>{if(ne.value===null)return;const{init:n,initHash:r,final:c,finalHash:S}=ne.value,[k,$]=r<=S?[n,c]:[c,n],q=Te(k),V=Te($);if(q!==ve.value&&V!==ve.value)return;const X={};return q===ve.value?(X.from=k.day,X.includeFrom=!0):X.from=1,V===ve.value?(X.to=$.day,X.includeTo=!0):X.to=E.value,X}),ve=p(()=>Te(u.value)),bt=p(()=>{const n={};if(e.options===void 0){for(let c=1;c<=E.value;c++)n[c]=!0;return n}const r=typeof e.options=="function"?e.options:c=>e.options.includes(c);for(let c=1;c<=E.value;c++){const S=ve.value+"/"+N(c);n[c]=r(S)}return n}),Dt=p(()=>{const n={};if(e.events===void 0)for(let r=1;r<=E.value;r++)n[r]=!1;else{const r=typeof e.events=="function"?e.events:c=>e.events.includes(c);for(let c=1;c<=E.value;c++){const S=ve.value+"/"+N(c);n[c]=r(S)===!0&&fe.value(S)}}return n}),Ae=p(()=>{let n,r;const{year:c,month:S}=u.value;if(e.calendar!=="persian")n=new Date(c,S-1,1),r=new Date(c,S-1,0).getDate();else{const k=Xt(c,S,1);n=new Date(k.gy,k.gm-1,k.gd);let $=S-1,q=c;$===0&&($=12,q--),r=dt(q,$)}return{days:n.getDay()-y.value-1,endDay:r}}),Ve=p(()=>{const n=[],{days:r,endDay:c}=Ae.value,S=r<0?r+7:r;if(S<6)for(let q=c-S;q<=c;q++)n.push({i:q,fill:!0});const k=n.length;for(let q=1;q<=E.value;q++){const V={i:q,event:Dt.value[q],classes:[]};bt.value[q]===!0&&(V.in=!0,V.flat=!0),n.push(V)}if(Pe.value[ve.value]!==void 0&&Pe.value[ve.value].forEach(q=>{const V=k+q-1;Object.assign(n[V],{selected:!0,unelevated:!0,flat:!1,color:ce.value,textColor:se.value})}),at.value[ve.value]!==void 0&&at.value[ve.value].forEach(q=>{if(q.from!==void 0){const V=k+q.from-1,X=k+(q.to||E.value)-1;for(let et=V;et<=X;et++)Object.assign(n[et],{range:q.range,unelevated:!0,color:ce.value,textColor:se.value});Object.assign(n[V],{rangeFrom:!0,flat:!1}),q.to!==void 0&&Object.assign(n[X],{rangeTo:!0,flat:!1})}else if(q.to!==void 0){const V=k+q.to-1;for(let X=k;X<=V;X++)Object.assign(n[X],{range:q.range,unelevated:!0,color:ce.value,textColor:se.value});Object.assign(n[V],{flat:!1,rangeTo:!0})}else{const V=k+E.value-1;for(let X=k;X<=V;X++)Object.assign(n[X],{range:q.range,unelevated:!0,color:ce.value,textColor:se.value})}}),ze.value!==void 0){const q=k+ze.value.from-1,V=k+ze.value.to-1;for(let X=q;X<=V;X++)n[X].color=ce.value,n[X].editRange=!0;ze.value.includeFrom===!0&&(n[q].editRangeFrom=!0),ze.value.includeTo===!0&&(n[V].editRangeTo=!0)}u.value.year===_.value.year&&u.value.month===_.value.month&&(n[k+_.value.day-1].today=!0);const $=n.length%7;if($>0){const q=7-$;for(let V=1;V<=q;V++)n.push({i:V,fill:!0})}return n.forEach(q=>{let V="q-date__calendar-item ";q.fill===!0?V+="q-date__calendar-item--fill":(V+=`q-date__calendar-item--${q.in===!0?"in":"out"}`,q.range!==void 0&&(V+=` q-date__range${q.rangeTo===!0?"-to":q.rangeFrom===!0?"-from":""}`),q.editRange===!0&&(V+=` q-date__edit-range${q.editRangeFrom===!0?"-from":""}${q.editRangeTo===!0?"-to":""}`),(q.range!==void 0||q.editRange===!0)&&(V+=` text-${q.color}`)),q.classes=V}),n}),Ie=p(()=>e.disable===!0?{"aria-disabled":"true"}:{});pe(()=>e.modelValue,n=>{if(x===JSON.stringify(n))x=0;else{const r=v(C.value,w.value);me(r.year,r.month,r)}}),pe(T,()=>{L.value!==null&&l.$el.contains(document.activeElement)===!0&&L.value.focus()}),pe(()=>u.value.year+"|"+u.value.month,()=>{a("navigation",{year:u.value.year,month:u.value.month})}),pe(M,n=>{Lt(n,w.value,"mask"),C.value=n}),pe(s,n=>{Lt(C.value,n,"locale"),w.value=n});function Ze(n){x=JSON.stringify(n)}function We(){const{year:n,month:r,day:c}=_.value,S={...u.value,year:n,month:r,day:c},k=Pe.value[Te(S)];(k===void 0||k.includes(S.day)===!1)&&wt(S),_e(S.year,S.month)}function lt(n){tn(n)===!0&&(T.value=n)}function Xe(n,r){["month","year"].includes(n)&&(n==="month"?H:B)(r===!0?-1:1)}function _e(n,r){T.value="Calendar",me(n,r)}function Je(n,r){if(e.range===!1||!n){ne.value=null;return}const c=Object.assign({...u.value},n),S=r!==void 0?Object.assign({...u.value},r):c;ne.value={init:c,initHash:xe(c),final:S,finalHash:xe(S)},_e(c.year,c.month)}function ot(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ge(n,r,c){return Qe(n,r,c,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function v(n,r){const c=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(c.length===0)return D();const S=c[c.length-1],k=Ge(S.from!==void 0?S.from:S,n,r);return k.dateHash===null?D():k}function D(){let n,r;if(e.defaultYearMonth!==void 0){const c=e.defaultYearMonth.split("/");n=parseInt(c[0],10),r=parseInt(c[1],10)}else{const c=_.value!==void 0?_.value:m();n=c.year,r=c.month}return{year:n,month:r,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:n+"/"+N(r)+"/01"}}function H(n){let r=u.value.year,c=Number(u.value.month)+n;c===13?(c=1,r++):c===0&&(c=12,r--),me(r,c),re.value===!0&&je("month")}function B(n){const r=Number(u.value.year)+n;me(r,u.value.month),re.value===!0&&je("year")}function le(n){me(n,u.value.month),T.value=e.defaultView==="Years"?"Months":"Calendar",re.value===!0&&je("year")}function ye(n){me(u.value.year,n),T.value="Calendar",re.value===!0&&je("month")}function P(n,r){(Pe.value[r]?.includes(n.day)===!0?Mt:wt)(n)}function oe(n){return{year:n.year,month:n.month,day:n.day}}function me(n,r,c){if(ae.value!==null&&n<=ae.value.year&&((r<ae.value.month||n<ae.value.year)&&(r=ae.value.month),n=ae.value.year),ue.value!==null&&n>=ue.value.year&&((r>ue.value.month||n>ue.value.year)&&(r=ue.value.month),n=ue.value.year),c!==void 0){const{hour:k,minute:$,second:q,millisecond:V,timezoneOffset:X,timeHash:et}=c;Object.assign(u.value,{hour:k,minute:$,second:q,millisecond:V,timezoneOffset:X,timeHash:et})}const S=n+"/"+N(r)+"/01";S!==u.value.dateHash&&(te.value=u.value.dateHash<S==(i.lang.rtl!==!0)?"left":"right",n!==u.value.year&&(U.value=te.value),mt(()=>{Z.value=n-n%Ce-(n<0?Ce:0),Object.assign(u.value,{year:n,month:r,day:1,dateHash:S})}))}function it(n,r,c){const S=n!==null&&n.length===1&&e.multiple===!1?n[0]:n,{reason:k,details:$}=Rt(r,c);Ze(S),a("update:modelValue",S,k,$)}function je(n){const r=Y.value[0]!==void 0&&Y.value[0].dateHash!==null?{...Y.value[0]}:{...u.value};mt(()=>{r.year=u.value.year,r.month=u.value.month;const c=e.calendar!=="persian"?new Date(r.year,r.month,0).getDate():dt(r.year,r.month);r.day=Math.min(Math.max(1,r.day),c);const S=Ne(r),{details:k}=Rt("",r);Ze(S),a("update:modelValue",S,n,k)})}function Rt(n,r){return r.from!==void 0?{reason:`${n}-range`,details:{...oe(r.target),from:oe(r.from),to:oe(r.to)}}:{reason:`${n}-day`,details:oe(r)}}function Ne(n,r,c){return n.from!==void 0?{from:we.value(n.from,r,c),to:we.value(n.to,r,c)}:we.value(n,r,c)}function wt(n){let r;if(e.multiple===!0)if(n.from!==void 0){const c=xe(n.from),S=xe(n.to),k=Y.value.filter(q=>q.dateHash<c||q.dateHash>S),$=Q.value.filter(({from:q,to:V})=>V.dateHash<c||q.dateHash>S);r=k.concat($).concat(n).map(q=>Ne(q))}else{const c=he.value.slice();c.push(Ne(n)),r=c}else r=Ne(n);it(r,"add",n)}function Mt(n){if(e.noUnset===!0)return;let r=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const c=Ne(n);n.from!==void 0?r=e.modelValue.filter(S=>S.from!==void 0?S.from!==c.from&&S.to!==c.to:!0):r=e.modelValue.filter(S=>S!==c),r.length===0&&(r=null)}it(r,"remove",n)}function Lt(n,r,c){const S=Y.value.concat(Q.value).map($=>Ne($,n,r)).filter($=>$.from!==void 0?$.from.dateHash!==null&&$.to.dateHash!==null:$.dateHash!==null),k=(e.multiple===!0?S:S[0])||null;Ze(k),a("update:modelValue",k,c)}function Tn(){if(e.minimal!==!0)return h("div",{class:"q-date__header "+b.value},[h("div",{class:"relative-position"},[h($e,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+Be.value,class:"q-date__header-subtitle q-date__header-link "+(T.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:f.value,...d("vY",{onClick(){T.value="Years"},onKeyup(n){n.keyCode===13&&(T.value="Years")}})},[Be.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h($e,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+Me.value,class:"q-date__header-title-label q-date__header-link "+(T.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:f.value,...d("vC",{onClick(){T.value="Calendar"},onKeyup(n){n.keyCode===13&&(T.value="Calendar")}})},[Me.value]))]),e.todayBtn===!0?h(ee,{class:"q-date__header-today self-start",icon:i.iconSet.datetime.today,"aria-label":i.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:f.value,onClick:We}):null])])}function St({label:n,type:r,key:c,dir:S,goTo:k,boundaries:$,cls:q}){return[h("div",{class:"row items-center q-date__arrow"},[h(ee,{round:!0,dense:!0,size:"sm",flat:!0,icon:g.value[0],"aria-label":r==="Years"?i.lang.date.prevYear:i.lang.date.prevMonth,tabindex:f.value,disable:$.prev===!1,...d("go-#"+r,{onClick(){k(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+q},[h($e,{name:"q-transition--jump-"+S},()=>h("div",{key:c},[h(ee,{flat:!0,dense:!0,noCaps:!0,label:n,tabindex:f.value,...d("view#"+r,{onClick:()=>{T.value=r}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(ee,{round:!0,dense:!0,size:"sm",flat:!0,icon:g.value[1],"aria-label":r==="Years"?i.lang.date.nextYear:i.lang.date.nextMonth,tabindex:f.value,disable:$.next===!1,...d("go+#"+r,{onClick(){k(1)}})})])]}const Yn={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},St({label:w.value.months[u.value.month-1],type:"Months",key:u.value.month,dir:te.value,goTo:H,boundaries:Ke.value.month,cls:" col"}).concat(St({label:u.value.year,type:"Years",key:u.value.year,dir:U.value,goTo:B,boundaries:Ke.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},A.value.map(n=>h("div",{class:"q-date__calendar-item"},[h("div",n)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h($e,{name:"q-transition--slide-"+te.value},()=>h("div",{key:ve.value,class:"q-date__calendar-days fit"},Ve.value.map(n=>h("div",{class:n.classes},[n.in===!0?h(ee,{class:n.today===!0?"q-date__today":"",dense:!0,flat:n.flat,unelevated:n.unelevated,color:n.color,textColor:n.textColor,label:n.i,tabindex:f.value,...d("day#"+n.i,{onClick:()=>{Hn(n.i)},onMouseover:()=>{On(n.i)}})},n.event!==!1?()=>h("div",{class:"q-date__event bg-"+n.event}):null):h("div",""+n.i)]))))])])],Months(){const n=u.value.year===_.value.year,r=S=>ae.value!==null&&u.value.year===ae.value.year&&ae.value.month>S||ue.value!==null&&u.value.year===ue.value.year&&ue.value.month<S,c=w.value.monthsShort.map((S,k)=>{const $=u.value.month===k+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(ee,{class:n===!0&&_.value.month===k+1?"q-date__today":null,flat:$!==!0,label:S,unelevated:$,color:$===!0?ce.value:null,textColor:$===!0?se.value:null,tabindex:f.value,disable:r(k+1),...d("month#"+k,{onClick:()=>{ye(k+1)}})})])});return e.yearsInMonthView===!0&&c.unshift(h("div",{class:"row no-wrap full-width"},[St({label:u.value.year,type:"Years",key:u.value.year,dir:U.value,goTo:B,boundaries:Ke.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},c)},Years(){const n=Z.value,r=n+Ce,c=[],S=k=>ae.value!==null&&ae.value.year>k||ue.value!==null&&ue.value.year<k;for(let k=n;k<=r;k++){const $=u.value.year===k;c.push(h("div",{class:"q-date__years-item flex flex-center"},[h(ee,{key:"yr"+k,class:_.value.year===k?"q-date__today":null,flat:!$,label:k,dense:!0,unelevated:$,color:$===!0?ce.value:null,textColor:$===!0?se.value:null,tabindex:f.value,disable:S(k),...d("yr#"+k,{onClick:()=>{le(k)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(ee,{round:!0,dense:!0,flat:!0,icon:g.value[0],"aria-label":i.lang.date.prevRangeYears(Ce),tabindex:f.value,disable:S(n),...d("y-",{onClick:()=>{Z.value-=Ce}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},c),h("div",{class:"col-auto"},[h(ee,{round:!0,dense:!0,flat:!0,icon:g.value[1],"aria-label":i.lang.date.nextRangeYears(Ce),tabindex:f.value,disable:S(r),...d("y+",{onClick:()=>{Z.value+=Ce}})})])])}};function Hn(n){const r={...u.value,day:n};if(e.range===!1){P(r,ve.value);return}if(ne.value===null){const c=Ve.value.find(k=>k.fill!==!0&&k.i===n);if(e.noUnset!==!0&&c.range!==void 0){Mt({target:r,from:c.range.from,to:c.range.to});return}if(c.selected===!0){Mt(r);return}const S=xe(r);ne.value={init:r,initHash:S,final:r,finalHash:S},a("rangeStart",oe(r))}else{const c=ne.value.initHash,S=xe(r),k=c<=S?{from:ne.value.init,to:r}:{from:r,to:ne.value.init};ne.value=null,wt(c===S?r:{target:r,...k}),a("rangeEnd",{from:oe(k.from),to:oe(k.to)})}}function On(n){if(ne.value!==null){const r={...u.value,day:n};Object.assign(ne.value,{final:r,finalHash:xe(r)})}}return Object.assign(l,{setToday:We,setView:lt,offsetCalendar:Xe,setCalendarTo:_e,setEditingRange:Je}),()=>{const n=[h("div",{class:"q-date__content col relative-position"},[h($e,{name:"q-transition--fade"},Yn[T.value])])],r=pt(t.default);return r!==void 0&&n.push(h("div",{class:"q-date__actions"},r)),e.name!==void 0&&e.disable!==!0&&F(n,"push"),h("div",{class:De.value,...Ie.value},[Tn(),h("div",{ref:L,class:"q-date__main col column",tabindex:-1},n)])}}}),nt=Fe({name:"QPopupProxy",props:{...ra,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:a,attrs:l}){const{proxy:i}=Oe(),{$q:o}=i,d=K(!1),f=K(null),b=p(()=>parseInt(e.breakpoint,10)),{canShow:O}=ua({showing:d});function m(){return o.screen.width<b.value||o.screen.height<b.value?"dialog":"menu"}const x=K(m()),j=p(()=>x.value==="menu"?{maxHeight:"99vh"}:{});pe(()=>m(),C=>{d.value!==!0&&(x.value=C)});function F(C){d.value=!0,a("show",C)}function L(C){d.value=!1,x.value=m(),a("hide",C)}return Object.assign(i,{show(C){O(C)===!0&&f.value.show(C)},hide(C){f.value.hide(C)},toggle(C){f.value.toggle(C)}}),ln(i,"currentComponent",()=>({type:x.value,ref:f.value})),()=>{const C={ref:f,...j.value,...l,onShow:F,onHide:L};let w;return x.value==="dialog"?w=Un:(w=mn,Object.assign(C,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(w,C,t.default)}}});function al(e,t){return e.hour!==null&&e.minute===null?"minute":"hour"}function ll(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}const nn=Fe({name:"QTime",props:{...gt,...Vt,...ht,modelValue:{required:!0,validator:e=>typeof e=="string"||e===null},mask:{...ht.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:yn,setup(e,{slots:t,emit:a}){const l=Oe(),{$q:i}=l.proxy,o=yt(e,i),{tabindex:d,headerClass:f,getLocale:b,getCurrentDate:O}=pn(e,i),m=sn(e),x=cn(m);let j,F;const L=K(null),C=p(()=>Be()),w=p(()=>b()),M=p(()=>g()),s=Qe(e.modelValue,C.value,w.value,e.calendar,M.value),_=K(al(s)),u=K(s),T=K(s.hour===null||s.hour<12),I=p(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(o.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),te=p(()=>{const v=u.value;return{hour:v.hour===null?"--":U.value===!0?N(v.hour):String(T.value===!0?v.hour===0?12:v.hour:v.hour>12?v.hour-12:v.hour),minute:v.minute===null?"--":N(v.minute),second:v.second===null?"--":N(v.second)}}),U=p(()=>e.format24h!==null?e.format24h:i.lang.date.format24h),R=p(()=>{const v=_.value==="hour",D=v===!0?12:60,H=u.value[_.value];let le=`rotate(${Math.round(H*(360/D))-180}deg) translateX(-50%)`;return v===!0&&U.value===!0&&u.value.hour>=12&&(le+=" scale(.7)"),{transform:le}}),Z=p(()=>u.value.hour!==null),ne=p(()=>Z.value===!0&&u.value.minute!==null),De=p(()=>e.hourOptions!==void 0?v=>e.hourOptions.includes(v):e.options!==void 0?v=>e.options(v,null,null):null),ce=p(()=>e.minuteOptions!==void 0?v=>e.minuteOptions.includes(v):e.options!==void 0?v=>e.options(u.value.hour,v,null):null),se=p(()=>e.secondOptions!==void 0?v=>e.secondOptions.includes(v):e.options!==void 0?v=>e.options(u.value.hour,u.value.minute,v):null),re=p(()=>{if(De.value===null)return null;const v=Me(0,11,De.value),D=Me(12,11,De.value);return{am:v,pm:D,values:v.values.concat(D.values)}}),he=p(()=>ce.value!==null?Me(0,59,ce.value):null),Y=p(()=>se.value!==null?Me(0,59,se.value):null),Q=p(()=>{switch(_.value){case"hour":return re.value;case"minute":return he.value;case"second":return Y.value}}),ie=p(()=>{let v,D,H=0,B=1;const le=Q.value!==null?Q.value.values:void 0;_.value==="hour"?U.value===!0?(v=0,D=23):(v=0,D=11,T.value===!1&&(H=12)):(v=0,D=55,B=5);const ye=[];for(let P=v,oe=v;P<=D;P+=B,oe++){const me=P+H,it=le?.includes(me)===!1,je=_.value==="hour"&&P===0?U.value===!0?"00":"12":P;ye.push({val:me,index:oe,disable:it,label:je})}return ye}),we=p(()=>[[sa,E,void 0,{stop:!0,prevent:!0,mouse:!0}]]);pe(()=>e.modelValue,v=>{const D=Qe(v,C.value,w.value,e.calendar,M.value);(D.dateHash!==u.value.dateHash||D.timeHash!==u.value.timeHash)&&(u.value=D,D.hour===null?_.value="hour":T.value=D.hour<12)}),pe([C,w],()=>{mt(()=>{Je()})});function de(){const v={...O(),...ll()};Je(v),Object.assign(u.value,v),_.value="hour"}function Me(v,D,H){const B=Array.apply(null,{length:D+1}).map((le,ye)=>{const P=ye+v;return{index:P,val:H(P)===!0}}).filter(le=>le.val===!0).map(le=>le.index);return{min:B[0],max:B[B.length-1],values:B,threshold:D+1}}function ge(v,D,H){const B=Math.abs(v-D);return Math.min(B,H-B)}function ke(v,{min:D,max:H,values:B,threshold:le}){if(v===D)return D;if(v<D||v>H)return ge(v,D,le)<=ge(v,H,le)?D:H;const ye=B.findIndex(me=>v<=me),P=B[ye-1],oe=B[ye];return v-P<=oe-v?P:oe}function Be(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function g(){if(typeof e.defaultDate!="string"){const v=O(!0);return v.dateHash=xe(v),v}return Qe(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function y(){return Kn(l)===!0||Q.value!==null&&(Q.value.values.length===0||_.value==="hour"&&U.value!==!0&&re.value[T.value===!0?"am":"pm"].values.length===0)}function A(){const v=L.value,{top:D,left:H,width:B}=v.getBoundingClientRect(),le=B/2;return{top:D+le,left:H+le,dist:le*.7}}function E(v){if(y()!==!0){if(v.isFirst===!0){j=A(),F=ae(v.evt,j);return}F=ae(v.evt,j,F),v.isFinal===!0&&(j=!1,F=null,fe())}}function fe(){_.value==="hour"?_.value="minute":e.withSeconds&&_.value==="minute"&&(_.value="second")}function ae(v,D,H){const B=Qn(v),le=Math.abs(B.top-D.top),ye=Math.sqrt(Math.pow(Math.abs(B.top-D.top),2)+Math.pow(Math.abs(B.left-D.left),2));let P,oe=Math.asin(le/ye)*(180/Math.PI);if(B.top<D.top?oe=D.left<B.left?90-oe:270+oe:oe=D.left<B.left?oe+90:270-oe,_.value==="hour"){if(P=oe/30,re.value!==null){const me=U.value!==!0?T.value===!0:re.value.am.values.length!==0&&re.value.pm.values.length!==0?ye>=D.dist:re.value.am.values.length!==0;P=ke(P+(me===!0?0:12),re.value[me===!0?"am":"pm"])}else P=Math.round(P),U.value===!0?ye<D.dist?P<12&&(P+=12):P===12&&(P=0):T.value===!0&&P===12?P=0:T.value===!1&&P!==12&&(P+=12);U.value===!0&&(T.value=P<12)}else P=Math.round(oe/6)%60,_.value==="minute"&&he.value!==null?P=ke(P,he.value):_.value==="second"&&Y.value!==null&&(P=ke(P,Y.value));return H!==P&&Ze[_.value](P),P}const ue={hour(){_.value="hour"},minute(){_.value="minute"},second(){_.value="second"}};function Ke(v){v.keyCode===13&&We()}function Pe(v){v.keyCode===13&&lt()}function at(v){y()!==!0&&(i.platform.is.desktop!==!0&&ae(v,A()),fe())}function ze(v){y()!==!0&&ae(v,A())}function ve(v){if(v.keyCode===13)_.value="hour";else if([37,39].includes(v.keyCode)){const D=v.keyCode===37?-1:1;if(re.value!==null){const H=U.value===!0?re.value.values:re.value[T.value===!0?"am":"pm"].values;if(H.length===0)return;if(u.value.hour===null)Ae(H[0]);else{const B=(H.length+H.indexOf(u.value.hour)+D)%H.length;Ae(H[B])}}else{const H=U.value===!0?24:12,B=U.value!==!0&&T.value===!1?12:0,le=u.value.hour===null?-D:u.value.hour;Ae(B+(24+le+D)%H)}}}function bt(v){if(v.keyCode===13)_.value="minute";else if([37,39].includes(v.keyCode)){const D=v.keyCode===37?-1:1;if(he.value!==null){const H=he.value.values;if(H.length===0)return;if(u.value.minute===null)Ve(H[0]);else{const B=(H.length+H.indexOf(u.value.minute)+D)%H.length;Ve(H[B])}}else{const H=u.value.minute===null?-D:u.value.minute;Ve((60+H+D)%60)}}}function Dt(v){if(v.keyCode===13)_.value="second";else if([37,39].includes(v.keyCode)){const D=v.keyCode===37?-1:1;if(Y.value!==null){const H=Y.value.values;if(H.length===0)return;if(u.value.seconds===null)Ie(H[0]);else{const B=(H.length+H.indexOf(u.value.second)+D)%H.length;Ie(H[B])}}else{const H=u.value.second===null?-D:u.value.second;Ie((60+H+D)%60)}}}function Ae(v){u.value.hour!==v&&(u.value.hour=v,_e())}function Ve(v){u.value.minute!==v&&(u.value.minute=v,_e())}function Ie(v){u.value.second!==v&&(u.value.second=v,_e())}const Ze={hour:Ae,minute:Ve,second:Ie};function We(){T.value===!1&&(T.value=!0,u.value.hour!==null&&(u.value.hour-=12,_e()))}function lt(){T.value===!0&&(T.value=!1,u.value.hour!==null&&(u.value.hour+=12,_e()))}function Xe(v){const D=e.modelValue;_.value!==v&&D!==void 0&&D!==null&&D!==""&&typeof D!="string"&&(_.value=v)}function _e(){if(De.value!==null&&De.value(u.value.hour)!==!0){u.value=Qe(),Xe("hour");return}if(ce.value!==null&&ce.value(u.value.minute)!==!0){u.value.minute=null,u.value.second=null,Xe("minute");return}if(e.withSeconds===!0&&se.value!==null&&se.value(u.value.second)!==!0){u.value.second=null,Xe("second");return}u.value.hour===null||u.value.minute===null||e.withSeconds===!0&&u.value.second===null||Je()}function Je(v){const D=Object.assign({...u.value},v),H=e.calendar==="persian"?N(D.hour)+":"+N(D.minute)+(e.withSeconds===!0?":"+N(D.second):""):jt(new Date(D.year,D.month===null?null:D.month-1,D.day,D.hour,D.minute,D.second,D.millisecond),C.value,w.value,D.year,D.timezoneOffset);D.changed=H!==e.modelValue,a("update:modelValue",H,D)}function ot(){const v=[h("div",{class:"q-time__link "+(_.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:ue.hour,onKeyup:ve},te.value.hour),h("div",":"),h("div",Z.value===!0?{class:"q-time__link "+(_.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onKeyup:bt,onClick:ue.minute}:{class:"q-time__link"},te.value.minute)];e.withSeconds===!0&&v.push(h("div",":"),h("div",ne.value===!0?{class:"q-time__link "+(_.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onKeyup:Dt,onClick:ue.second}:{class:"q-time__link"},te.value.second));const D=[h("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},v)];return U.value===!1&&D.push(h("div",{class:"q-time__header-ampm column items-between no-wrap"},[h("div",{class:"q-time__link "+(T.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:We,onKeyup:Ke},"AM"),h("div",{class:"q-time__link "+(T.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:lt,onKeyup:Pe},"PM")])),h("div",{class:"q-time__header flex flex-center no-wrap "+f.value},D)}function Ge(){const v=u.value[_.value];return h("div",{class:"q-time__content col relative-position"},[h($e,{name:"q-transition--scale"},()=>h("div",{key:"clock"+_.value,class:"q-time__container-parent absolute-full"},[h("div",{ref:L,class:"q-time__container-child fit overflow-hidden"},[Ue(h("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:at,onMousedown:ze},[h("div",{class:"q-time__clock-circle fit"},[h("div",{class:"q-time__clock-pointer"+(u.value[_.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:R.value}),ie.value.map(D=>h("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${D.index}`+(D.val===v?" q-time__clock-position--active "+f.value:D.disable===!0?" q-time__clock-position--disable":"")},[h("span",D.label)]))])]),we.value)])])),e.nowBtn===!0?h(ee,{class:"q-time__now-button absolute",icon:i.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:d.value,onClick:de}):null])}return l.proxy.setNow=de,()=>{const v=[Ge()],D=pt(t.default);return D!==void 0&&v.push(h("div",{class:"q-time__actions"},D)),e.name!==void 0&&e.disable!==!0&&x(v,"push"),h("div",{class:I.value,tabindex:-1},[ot(),h("div",{class:"q-time__main col overflow-auto"},v)])}}});function kn(e,t){if(t&&e===t)return null;const a=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(a)===!0)return e;const l=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i=l.display;return i==="block"||i==="table"?e:kn(e.parentNode)}function Tt(e,t,a){return!e||e===document.body?!1:a===!0&&e===t||(t===document?document.body:t).contains(e.parentNode)}function _n(e,t,a){if(a||(a=document.createRange(),a.selectNode(e),a.setStart(e,0)),t.count===0)a.setEnd(e,t.count);else if(t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(a.setEnd(e,t.count),t.count=0);else for(let l=0;t.count!==0&&l<e.childNodes.length;l++)a=_n(e.childNodes[l],t,a);return a}const ol=/^https?:\/\//;class il{constructor(t,a){this.el=t,this.eVm=a,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(Tt(t.anchorNode,this.el,!0)&&Tt(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const t=this.selection;return t?.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const a=t.startContainer;return a.nodeType===document.ELEMENT_NODE?a:a.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?kn(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const a=document.createRange(),l=document.getSelection();t!==null?(a.setStart(t.startContainer,t.startOffset),a.setEnd(t.endContainer,t.endOffset),l.removeAllRanges(),l.addRange(a)):(l.selectAllChildren(this.el),l.collapseToEnd())}savePosition(){let t=-1,a;const l=document.getSelection(),i=this.el.parentNode;if(l.focusNode&&Tt(l.focusNode,i))for(a=l.focusNode,t=l.focusOffset;a&&a!==i;)a!==this.el&&a.previousSibling?(a=a.previousSibling,t+=a.textContent.length):a=a.parentNode;this.savedPos=t}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const a=window.getSelection(),l=_n(this.el,{count:this.savedPos});l&&(l.collapse(!1),a.removeAllRanges(),a.addRange(l))}}hasParent(t,a){const l=a?this.parent:this.blockParent;return l!==null?l.nodeName.toLowerCase()===t.toLowerCase():!1}hasParents(t,a,l=this.parent){return l===null?!1:t.includes(l.nodeName.toLowerCase())===!0?!0:a===!0?this.hasParents(t,a,l.parentNode):!1}is(t,a){if(this.selection===null)return!1;switch(t){case"formatBlock":return a==="DIV"&&this.parent===this.el||this.hasParent(a,a==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===a;case"fontName":const l=document.queryCommandValue(t);return l===`"${a}"`||l===a;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const i=document.queryCommandState(t);return a!==void 0?i===a:i}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){if(t==="outdent")return this.hasParents(["blockquote","li"],!0);if(t==="indent")return this.hasParents(["li"],!0);if(t==="link")return this.selection!==null||this.is("link")}apply(t,a,l=Zn){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(a)&&this.is(t,a)&&(t="outdent",a=null),a==="PRE"&&this.is(t,"PRE")&&(a="P");else if(t==="print"){l();const i=window.open();i.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),i.print(),i.close();return}else if(t==="link"){const i=this.getParentAttribute("href");if(i===null){const o=this.selectWord(this.selection),d=o?o.toString():"";if(!d.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=ol.test(d)?d:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(o.getRangeAt(0))}else this.eVm.editLinkUrl.value=i,this.range.selectNodeContents(this.parent),this.save();return}else if(t==="fullscreen"){this.eVm.toggleFullscreen(),l();return}else if(t==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),l();return}document.execCommand(t,!1,a),l()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const a=document.createRange();a.setStart(t.anchorNode,t.anchorOffset),a.setEnd(t.focusNode,t.focusOffset);const l=a.collapsed?["backward","forward"]:["forward","backward"];a.detach();const i=t.focusNode,o=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",l[0],"character"),t.modify("move",l[1],"word"),t.extend(i,o),t.modify("extend",l[1],"character"),t.modify("extend",l[0],"word"),t}}const rl=Object.keys(dn);function ul(e){return rl.reduce((t,a)=>{const l=e[a];return l!==void 0&&(t[a]=l),t},{})}const sl=Fe({name:"QBtnDropdown",props:{...dn,...on,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:a}){const{proxy:l}=Oe(),i=K(e.modelValue),o=K(null),d=Wn(),f=p(()=>{const u={"aria-expanded":i.value===!0?"true":"false","aria-haspopup":"true","aria-controls":d.value,"aria-label":e.toggleAriaLabel||l.$q.lang.label[i.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(u["aria-disabled"]="true"),u}),b=p(()=>"q-btn-dropdown__arrow"+(i.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),O=p(()=>Xn(e)),m=p(()=>ul(e));pe(()=>e.modelValue,u=>{o.value?.[u?"show":"hide"]()}),pe(()=>e.split,_);function x(u){i.value=!0,a("beforeShow",u)}function j(u){a("show",u),a("update:modelValue",!0)}function F(u){i.value=!1,a("beforeHide",u)}function L(u){a("hide",u),a("update:modelValue",!1)}function C(u){a("click",u)}function w(u){Ft(u),_(),a("click",u)}function M(u){o.value?.toggle(u)}function s(u){o.value?.show(u)}function _(u){o.value?.hide(u)}return Object.assign(l,{show:s,hide:_,toggle:M}),$t(()=>{e.modelValue===!0&&s()}),()=>{const u=[h(Ye,{class:b.value,name:e.dropdownIcon||l.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&u.push(h(mn,{ref:o,id:d.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:x,onShow:j,onBeforeHide:F,onHide:L},t.default)),e.split===!1?h(ee,{class:"q-btn-dropdown q-btn-dropdown--simple",...m.value,...f.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:C},{default:()=>pt(t.label,[]).concat(u),loading:t.loading}):h(ca,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...O.value,glossy:e.glossy,stretch:e.stretch},()=>[h(ee,{class:"q-btn-dropdown--current",...m.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:w},{default:t.label,loading:t.loading}),h(ee,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...f.value,...O.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>u)])}}});function Cn(e,t,a){t.handler?t.handler(e,a,a.caret):a.runCmd(t.cmd,t.param)}function Nt(e){return h("div",{class:"q-editor__toolbar-group"},e)}function xn(e,t,a,l=!1){const i=l||(t.type==="toggle"?t.toggled?t.toggled(e):t.cmd&&e.caret.is(t.cmd,t.param):!1),o=[];if(e.$q.platform.is.desktop&&(t.tip||t.htmlTip)){const d=t.key?h("div",[h("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;o.push(h(vn,{delay:1e3},()=>[h("div",t.htmlTip?{innerHTML:t.htmlTip}:t.tip),d]))}return h(ee,{...e.buttonProps.value,icon:t.icon!==null?t.icon:void 0,color:i?t.toggleColor||e.props.toolbarToggleColor:t.color||e.props.toolbarColor,textColor:i&&!e.props.toolbarPush?null:t.textColor||e.props.toolbarTextColor,label:t.label,"aria-label":t.label==null?t.tip:void 0,disable:t.disable?typeof t.disable=="function"?t.disable(e):!0:!1,size:"sm",onClick(d){a?.(),Cn(d,t,e)}},()=>o)}function cl(e,t){const a=t.list==="only-icons";let l=t.label,i=t.icon!==null?t.icon:void 0,o,d;function f(){O.component.proxy.hide()}if(a)d=t.options.map(m=>{const x=m.type===void 0?e.caret.is(m.cmd,m.param):!1;return x&&(l=m.tip,i=m.icon!==null?m.icon:void 0),xn(e,m,f,x)}),o=e.toolbarBackgroundClass.value,d=[Nt(d)];else{const m=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,x=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,j=t.list==="no-icons";d=t.options.map(F=>{const L=F.disable?F.disable(e):!1,C=F.type===void 0?e.caret.is(F.cmd,F.param):!1;C&&(l=F.tip,i=F.icon!==null?F.icon:void 0);const w=F.htmlTip;return h(da,{active:C,activeClass:m,clickable:!0,disable:L,dense:!0,onClick(M){f(),M?.qAvoidFocus!==!0&&e.contentRef.value?.focus(),e.caret.restore(),Cn(M,F,e)}},()=>[j===!0?null:h(Wt,{class:C?m:x,side:!0},()=>h(Ye,{name:F.icon!==null?F.icon:void 0})),h(Wt,w?()=>h("div",{class:"text-no-wrap",innerHTML:F.htmlTip}):F.tip?()=>h("div",{class:"text-no-wrap"},F.tip):void 0)])}),o=[e.toolbarBackgroundClass.value,x]}const b=t.highlight&&l!==t.label,O=h(sl,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:b?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:b&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:t.fixedLabel?t.label:l,icon:t.fixedIcon?t.icon!==null?t.icon:void 0:i,contentClass:o,onShow:m=>e.emit("dropdownShow",m),onHide:m=>e.emit("dropdownHide",m),onBeforeShow:m=>e.emit("dropdownBeforeShow",m),onBeforeHide:m=>e.emit("dropdownBeforeHide",m)},()=>d);return O}function dl(e){if(e.caret)return e.buttons.value.filter(t=>!e.isViewingSource.value||t.find(a=>a.cmd==="viewsource")).map(t=>Nt(t.map(a=>e.isViewingSource.value&&a.cmd!=="viewsource"?!1:a.type==="slot"?pt(e.slots[a.slot]):a.type==="dropdown"?cl(e,a):xn(e,a))))}function fl(e,t,a,l={}){const i=Object.keys(l);if(i.length===0)return{};const o={default_font:{cmd:"fontName",param:e,icon:a,tip:t}};return i.forEach(d=>{const f=l[d];o[d]={cmd:"fontName",param:f,icon:a,tip:f,htmlTip:`<font face="${f}">${f}</font>`}}),o}function vl(e){if(e.caret){const t=e.props.toolbarColor||e.props.toolbarTextColor;let a=e.editLinkUrl.value;const l=()=>{e.caret.restore(),a!==e.editLinkUrl.value&&document.execCommand("createLink",!1,a===""?" ":a),e.editLinkUrl.value=null};return[h("div",{class:`q-mx-xs text-${t}`},`${e.$q.lang.editor.url}: `),h("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:a,onInput:i=>{Ft(i),a=i.target.value},onKeydown:i=>{if(fn(i)!==!0)switch(i.keyCode){case 13:return Ht(i),l();case 27:Ht(i),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),Nt([h(ee,{key:"qedt_btm_rem",...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),h(ee,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:l})])]}}const ml=Object.prototype.toString,Yt=Object.prototype.hasOwnProperty,hl=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function an(e){if(e!==Object(e)||hl.has(ml.call(e))===!0||e.constructor&&Yt.call(e,"constructor")===!1&&Yt.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let t;for(t in e);return t===void 0||Yt.call(e,t)}function qn(){let e,t,a,l,i,o,d=arguments[0]||{},f=1,b=!1;const O=arguments.length;for(typeof d=="boolean"&&(b=d,d=arguments[1]||{},f=2),Object(d)!==d&&typeof d!="function"&&(d={}),O===f&&(d=this,f--);f<O;f++)if((e=arguments[f])!==null)for(t in e)a=d[t],l=e[t],d!==l&&(b===!0&&l&&((i=Array.isArray(l))||an(l)===!0)?(i===!0?o=Array.isArray(a)===!0?a:[]:o=an(a)===!0?a:{},d[t]=qn(b,o,l)):l!==void 0&&(d[t]=l));return d}const gl=Fe({name:"QEditor",props:{...gt,...ma,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(t=>t.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...va,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:t,emit:a}){const{proxy:l}=Oe(),{$q:i}=l,o=yt(e,i),{inFullscreen:d,toggleFullscreen:f}=ha(),b=Jn(),O=K(null),m=K(null),x=K(null),j=K(!1),F=p(()=>!e.readonly&&!e.disable);let L,C,w=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),L=window.getComputedStyle(document.body).fontFamily;const M=p(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),s=p(()=>({type:"a",flat:e.toolbarOutline!==!0&&e.toolbarPush!==!0,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!F.value,size:"sm"})),_=p(()=>{const g=i.lang.editor,y=i.iconSet.editor;return{bold:{cmd:"bold",icon:y.bold,tip:g.bold,key:66},italic:{cmd:"italic",icon:y.italic,tip:g.italic,key:73},strike:{cmd:"strikeThrough",icon:y.strikethrough,tip:g.strikethrough,key:83},underline:{cmd:"underline",icon:y.underline,tip:g.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:y.unorderedList,tip:g.unorderedList},ordered:{cmd:"insertOrderedList",icon:y.orderedList,tip:g.orderedList},subscript:{cmd:"subscript",icon:y.subscript,tip:g.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:y.superscript,tip:g.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:A=>A.caret&&!A.caret.can("link"),icon:y.hyperlink,tip:g.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:y.toggleFullscreen,tip:g.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:y.viewSource,tip:g.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:y.quote,tip:g.quote,key:81},left:{cmd:"justifyLeft",icon:y.left,tip:g.left},center:{cmd:"justifyCenter",icon:y.center,tip:g.center},right:{cmd:"justifyRight",icon:y.right,tip:g.right},justify:{cmd:"justifyFull",icon:y.justify,tip:g.justify},print:{type:"no-state",cmd:"print",icon:y.print,tip:g.print,key:80},outdent:{type:"no-state",disable:A=>A.caret&&!A.caret.can("outdent"),cmd:"outdent",icon:y.outdent,tip:g.outdent},indent:{type:"no-state",disable:A=>A.caret&&!A.caret.can("indent"),cmd:"indent",icon:y.indent,tip:g.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:y.removeFormat,tip:g.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:y.hr,tip:g.hr},undo:{type:"no-state",cmd:"undo",icon:y.undo,tip:g.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:y.redo,tip:g.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:y.heading1||y.heading,tip:g.heading1,htmlTip:`<h1 class="q-ma-none">${g.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:y.heading2||y.heading,tip:g.heading2,htmlTip:`<h2 class="q-ma-none">${g.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:y.heading3||y.heading,tip:g.heading3,htmlTip:`<h3 class="q-ma-none">${g.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:y.heading4||y.heading,tip:g.heading4,htmlTip:`<h4 class="q-ma-none">${g.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:y.heading5||y.heading,tip:g.heading5,htmlTip:`<h5 class="q-ma-none">${g.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:y.heading6||y.heading,tip:g.heading6,htmlTip:`<h6 class="q-ma-none">${g.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:y.heading,tip:g.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:y.code,htmlTip:`<code>${g.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:y.size1||y.size,tip:g.size1,htmlTip:`<font size="1">${g.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:y.size2||y.size,tip:g.size2,htmlTip:`<font size="2">${g.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:y.size3||y.size,tip:g.size3,htmlTip:`<font size="3">${g.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:y.size4||y.size,tip:g.size4,htmlTip:`<font size="4">${g.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:y.size5||y.size,tip:g.size5,htmlTip:`<font size="5">${g.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:y.size6||y.size,tip:g.size6,htmlTip:`<font size="6">${g.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:y.size7||y.size,tip:g.size7,htmlTip:`<font size="7">${g.size7}</font>`}}}),u=p(()=>{const g=e.definitions||{},y=e.definitions||e.fonts?qn(!0,{},_.value,g,fl(L,i.lang.editor.defaultFont,i.iconSet.editor.font,e.fonts)):_.value;return e.toolbar.map(A=>A.map(E=>{if(E.options)return{type:"dropdown",icon:E.icon,label:E.label,size:"sm",dense:!0,fixedLabel:E.fixedLabel,fixedIcon:E.fixedIcon,highlight:E.highlight,list:E.list,options:E.options.map(ae=>y[ae])};const fe=y[E];return fe?fe.type==="no-state"||g[E]&&(fe.cmd===void 0||_.value[fe.cmd]&&_.value[fe.cmd].type==="no-state")?fe:Object.assign({type:"toggle"},fe):{type:"slot",slot:E}}))}),T={$q:i,props:e,slots:t,emit:a,inFullscreen:d,toggleFullscreen:f,runCmd:Me,isViewingSource:j,editLinkUrl:x,toolbarBackgroundClass:M,buttonProps:s,contentRef:m,buttons:u,setContent:de};pe(()=>e.modelValue,g=>{w!==g&&(w=g,de(g,!0))}),pe(x,g=>{a(`link${g?"Show":"Hide"}`)});const I=p(()=>e.toolbar&&e.toolbar.length!==0),te=p(()=>{const g={},y=A=>{A.key&&(g[A.key]={cmd:A.cmd,param:A.param})};return u.value.forEach(A=>{A.forEach(E=>{E.options?E.options.forEach(y):y(E)})}),g}),U=p(()=>d.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),R=p(()=>`q-editor q-editor--${j.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(d.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(o.value===!0?" q-editor--dark q-dark":"")),Z=p(()=>[e.contentClass,"q-editor__content",{col:d.value,"overflow-auto":d.value||e.maxHeight}]),ne=p(()=>e.disable===!0?{"aria-disabled":"true"}:{});function De(){if(m.value!==null){const g=`inner${j.value===!0?"Text":"HTML"}`,y=m.value[g];y!==e.modelValue&&(w=y,a("update:modelValue",y))}}function ce(g){if(a("keydown",g),g.ctrlKey!==!0||fn(g)===!0){ge();return}const y=g.keyCode,A=te.value[y];if(A!==void 0){const{cmd:E,param:fe}=A;zt(g),Me(E,fe,!1)}}function se(g){ge(),a("click",g)}function re(g){if(m.value!==null){const{scrollTop:y,scrollHeight:A}=m.value;C=A-y}T.caret.save(),a("blur",g)}function he(g){mt(()=>{m.value!==null&&C!==void 0&&(m.value.scrollTop=m.value.scrollHeight-C)}),a("focus",g)}function Y(g){const y=O.value;if(y!==null&&y.contains(g.target)===!0&&(g.relatedTarget===null||y.contains(g.relatedTarget)!==!0)){const A=`inner${j.value===!0?"Text":"HTML"}`;T.caret.restorePosition(m.value[A].length),ge()}}function Q(g){const y=O.value;y!==null&&y.contains(g.target)===!0&&(g.relatedTarget===null||y.contains(g.relatedTarget)!==!0)&&(T.caret.savePosition(),ge())}function ie(){C=void 0}function we(g){T.caret.save()}function de(g,y){if(m.value!==null){y===!0&&T.caret.savePosition();const A=`inner${j.value===!0?"Text":"HTML"}`;m.value[A]=g,y===!0&&(T.caret.restorePosition(m.value[A].length),ge())}}function Me(g,y,A=!0){ke(),T.caret.restore(),T.caret.apply(g,y,()=>{ke(),T.caret.save(),A&&ge()})}function ge(){setTimeout(()=>{x.value=null,l.$forceUpdate()},1)}function ke(){ea(()=>{m.value?.focus({preventScroll:!0})})}function Be(){return m.value}return $t(()=>{T.caret=l.caret=new il(m.value,T),de(e.modelValue),ge(),document.addEventListener("selectionchange",we)}),Gn(()=>{document.removeEventListener("selectionchange",we)}),Object.assign(l,{runCmd:Me,refreshToolbar:ge,focus:ke,getContentEl:Be}),()=>{let g;if(I.value){const y=[h("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+M.value},dl(T))];x.value!==null&&y.push(h("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+M.value},vl(T))),g=h("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},y)}return h("div",{ref:O,class:R.value,style:{height:d.value===!0?"100%":null},...ne.value,onFocusin:Y,onFocusout:Q},[g,h("div",{ref:m,style:U.value,class:Z.value,contenteditable:F.value,placeholder:e.placeholder,...b.listeners.value,onInput:De,onKeydown:ce,onClick:se,onBlur:re,onFocus:he,onMousedown:ie,onTouchstartPassive:ie})])}}}),yl={class:"row q-col-gutter-md"},pl={class:"col-12 col-md-12"},bl={class:"col-12 col-md-12"},Dl={class:"row q-col-gutter-md items-start"},wl={class:"col-12 col-md-6"},Ml={key:0,class:"col-12 col-md-6 relative-position"},Sl={key:0,class:"absolute-bottom text-subtitle2 text-center q-pa-xs"},kl={class:"col-12 col-md-6"},_l={class:"col-12 col-md-3"},Cl={class:"col-12 col-md-3"},xl={class:"col-12 col-md-6"},ql={class:"row items-center justify-end"},Tl={class:"row items-center justify-end"},Yl={class:"col-12 col-md-6"},Hl={class:"row items-center justify-end"},Ol={class:"row items-center justify-end"},Fl={class:"col-12 col-md-6"},zl={class:"row items-center justify-end"},Vl={class:"col-12 col-md-6"},$l={class:"col-12 col-md-4"},Bl={class:"col-12 col-md-4"},Pl={class:"col-12 col-md-4"},Al={class:"col-12 col-md-4"},Il={class:"row justify-end q-gutter-sm q-mt-lg"},ao={__name:"EventForm",props:{initialData:{type:Object,default:()=>({})},isEditMode:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["submit"],setup(e,{emit:t}){const a=fa(),l=e,i=t,o=Ut({title:"",imgUrl:"",location:"",serviceTarget:"",serviceDateRange:{start:"",end:""},registrationDeadline:"",maxParticipants:10,hours:8,description:"",category:null,volunteerType:null,serviceSlots:[],requiredSkills:[],hasAttendance:!1}),d=Ut({categories:[],skills:[],volunteerTypes:[],serviceSlots:[]}),f=K(null),b=K(!1),O=w=>w>=en.formatDate(Date.now(),"YYYY/MM/DD"),m=w=>{if(!o.serviceDateRange.start)return!0;const M=new Date(o.serviceDateRange.start);return w<=en.formatDate(M,"YYYY/MM/DD")},x=async()=>{try{const[w,M,s,_]=await Promise.all([ya(),pa(),ba(),Da()]);d.categories=w.data.result.map(u=>({label:u.name,value:u._id})),d.skills=M.data.result.map(u=>({label:u.name,value:u._id})),d.volunteerTypes=s.data.result.map(u=>({label:u.name,value:u._id})),d.serviceSlots=_.data.result.map(u=>({label:u.name,value:u._id}))}catch(w){console.error("Failed to load tag options",w)}},j=async w=>{if(w){b.value=!0;try{const{data:M}=await wa(w);o.imgUrl=M.result,a.notify({color:"positive",message:"åœ–ç‰‡ä¸Šå‚³æˆåŠŸ",icon:"cloud_done"})}catch(M){console.error(M),a.notify({color:"negative",message:"åœ–ç‰‡ä¸Šå‚³å¤±æ•—"})}finally{b.value=!1}}},F=()=>{o.imgUrl="",f.value=null},L=w=>{w.forEach(M=>{M.failedPropValidation==="max-file-size"&&a.notify({color:"negative",message:"æª”æ¡ˆå¤§å°ä¸å¯è¶…éŽ 2MB",icon:"error"})})};pe(()=>l.initialData,w=>{if(w&&w._id){o.title=w.title||"",o.imgUrl=w.imgUrl||"",o.location=w.location||"",o.serviceTarget=w.serviceTarget||"";const M=s=>{if(!s)return"";const _=new Date(s),u=T=>T.toString().padStart(2,"0");return`${_.getFullYear()}-${u(_.getMonth()+1)}-${u(_.getDate())} ${u(_.getHours())}:${u(_.getMinutes())}`};o.serviceDateRange={start:M(w.serviceDateRange?.start),end:M(w.serviceDateRange?.end)},o.registrationDeadline=w.registrationDeadline?.split("T")[0]||"",o.maxParticipants=w.maxParticipants||0,o.hours=w.hours||0,o.description=w.description||"",o.category=w.category?._id||w.category||null,o.volunteerType=w.volunteerType?._id||w.volunteerType||null,o.serviceSlots=w.serviceSlots?.map(s=>s._id||s)||[],o.requiredSkills=w.requiredSkills?.map(s=>s._id||s)||[],o.hasAttendance=w.hasAttendance||!1}},{immediate:!0,deep:!0});const C=()=>{const w={...o};o.hasAttendance&&delete w.hours,i("submit",w)};return $t(x),(w,M)=>(rt(),Qt(ga,{onSubmit:Zt(C,["prevent"]),class:"q-gutter-y-md"},{default:G(()=>[W("div",yl,[W("div",pl,[z(qe,{modelValue:o.title,"onUpdate:modelValue":M[0]||(M[0]=s=>o.title=s),label:"æ´»å‹•æ¨™é¡Œ *",filled:"","lazy-rules":"",rules:[s=>s&&s.length>0||"è«‹è¼¸å…¥æ¨™é¡Œ"]},null,8,["modelValue","rules"])]),W("div",bl,[W("div",Dl,[W("div",wl,[z(_a,{modelValue:f.value,"onUpdate:modelValue":[M[1]||(M[1]=s=>f.value=s),j],label:"æ´»å‹•å°é¢åœ–ç‰‡ (é»žæ“Šæˆ–æ‹–æ›³ä¸Šå‚³)",filled:"",accept:".jpg, .jpeg, .png","max-file-size":"2097152",clearable:"",onRejected:L,loading:b.value,disable:b.value},{prepend:G(()=>[z(Ye,{name:"cloud_upload"})]),_:1},8,["modelValue","loading","disable"]),M[19]||(M[19]=W("div",{class:"text-caption text-grey q-mt-xs"},"æ”¯æ´ JPG, PNG æ ¼å¼ (ä¸Šé™ 2MB)",-1))]),o.imgUrl||b.value?(rt(),Kt("div",Ml,[z(oa,{src:o.imgUrl||"",style:{"max-height":"200px","min-height":"150px","border-radius":"8px","background-color":"#f5f5f5"},fit:"cover",class:"shadow-2"},{default:G(()=>[o.imgUrl?(rt(),Kt("div",Sl," ç›®å‰å°é¢é è¦½ ")):kt("",!0),z(qa,{showing:b.value},{default:G(()=>[z(xa,{size:"50px",color:"primary"}),M[20]||(M[20]=W("div",{class:"text-primary q-mt-sm"},"ä¸Šå‚³ä¸­...",-1))]),_:1},8,["showing"])]),_:1},8,["src"]),o.imgUrl&&!b.value?(rt(),Qt(ee,{key:0,round:"",color:"negative",icon:"delete",size:"sm",class:"absolute",style:{top:"10px",right:"10px","z-index":"999"},onClick:Zt(F,["stop"])},{default:G(()=>[z(vn,null,{default:G(()=>[...M[21]||(M[21]=[ta("ç§»é™¤åœ–ç‰‡",-1)])]),_:1})]),_:1})):kt("",!0)])):kt("",!0)])]),W("div",kl,[z(qe,{modelValue:o.location,"onUpdate:modelValue":M[2]||(M[2]=s=>o.location=s),label:"æ´»å‹•åœ°é»ž *",filled:"","lazy-rules":"",rules:[s=>s&&s.length>0||"è«‹è¼¸å…¥åœ°é»ž"]},null,8,["modelValue","rules"])]),W("div",_l,[z(qe,{modelValue:o.maxParticipants,"onUpdate:modelValue":M[3]||(M[3]=s=>o.maxParticipants=s),modelModifiers:{number:!0},type:"number",label:"åé¡é™åˆ¶ *",filled:"",rules:[s=>s>=0||"åé¡ä¸å¯ç‚ºè² æ•¸"]},null,8,["modelValue","rules"])]),W("div",Cl,[z(qe,{modelValue:o.hours,"onUpdate:modelValue":M[4]||(M[4]=s=>o.hours=s),modelModifiers:{number:!0},type:"number",label:"æ´»å‹•æ™‚æ•¸ *",filled:"",disable:o.hasAttendance,hint:o.hasAttendance?"å·²æœ‰å‡ºå¸­ç´€éŒ„ï¼Œç‚ºç¢ºä¿è³‡æ–™ä¸€è‡´æ€§ï¼Œä¸å¯ä¿®æ”¹æ™‚æ•¸ã€‚":"",rules:[s=>s>0||"æ™‚æ•¸å¿…é ˆå¤§æ–¼ 0"]},null,8,["modelValue","disable","hint","rules"])]),W("div",xl,[z(qe,{filled:"",modelValue:o.serviceDateRange.start,"onUpdate:modelValue":M[7]||(M[7]=s=>o.serviceDateRange.start=s),label:"æœå‹™é–‹å§‹æ™‚é–“ *",mask:"####-##-## ##:##",rules:[s=>!!s||"è«‹é¸æ“‡é–‹å§‹æ™‚é–“",s=>new Date(s)>=new Date||"æ´»å‹•é–‹å§‹æ™‚é–“ä¸èƒ½ç‚ºéŽåŽ»æ™‚é–“"]},{append:G(()=>[z(Ye,{name:"event",class:"cursor-pointer"},{default:G(()=>[z(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:G(()=>[z(qt,{modelValue:o.serviceDateRange.start,"onUpdate:modelValue":M[5]||(M[5]=s=>o.serviceDateRange.start=s),mask:"YYYY-MM-DD HH:mm",options:O},{default:G(()=>[W("div",ql,[Ue(z(ee,{label:"ç¢ºå®š",color:"primary",flat:""},null,512),[[tt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1}),z(Ye,{name:"access_time",class:"cursor-pointer q-ml-sm"},{default:G(()=>[z(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:G(()=>[z(nn,{modelValue:o.serviceDateRange.start,"onUpdate:modelValue":M[6]||(M[6]=s=>o.serviceDateRange.start=s),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:G(()=>[W("div",Tl,[Ue(z(ee,{label:"ç¢ºå®š",color:"primary",flat:""},null,512),[[tt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])]),W("div",Yl,[z(qe,{filled:"",modelValue:o.serviceDateRange.end,"onUpdate:modelValue":M[10]||(M[10]=s=>o.serviceDateRange.end=s),label:"æœå‹™çµæŸæ™‚é–“ *",mask:"####-##-## ##:##"},{append:G(()=>[z(Ye,{name:"event",class:"cursor-pointer"},{default:G(()=>[z(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:G(()=>[z(qt,{modelValue:o.serviceDateRange.end,"onUpdate:modelValue":M[8]||(M[8]=s=>o.serviceDateRange.end=s),mask:"YYYY-MM-DD HH:mm"},{default:G(()=>[W("div",Hl,[Ue(z(ee,{label:"ç¢ºå®š",color:"primary",flat:""},null,512),[[tt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1}),z(Ye,{name:"access_time",class:"cursor-pointer q-ml-sm"},{default:G(()=>[z(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:G(()=>[z(nn,{modelValue:o.serviceDateRange.end,"onUpdate:modelValue":M[9]||(M[9]=s=>o.serviceDateRange.end=s),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:G(()=>[W("div",Ol,[Ue(z(ee,{label:"ç¢ºå®š",color:"primary",flat:""},null,512),[[tt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),W("div",Fl,[z(qe,{filled:"",modelValue:o.registrationDeadline,"onUpdate:modelValue":M[12]||(M[12]=s=>o.registrationDeadline=s),label:"å ±åæˆªæ­¢æ—¥ *",readonly:"",class:"cursor-pointer",rules:[s=>!!s||"è«‹é¸æ“‡æˆªæ­¢æ—¥æœŸ",s=>!o.serviceDateRange.start||new Date(s)<=new Date(o.serviceDateRange.start)||"æˆªæ­¢æ—¥æœŸå¿…é ˆåœ¨æ´»å‹•é–‹å§‹å‰"]},{append:G(()=>[z(Ye,{name:"event",class:"cursor-pointer"},{default:G(()=>[z(nt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:G(()=>[z(qt,{modelValue:o.registrationDeadline,"onUpdate:modelValue":M[11]||(M[11]=s=>o.registrationDeadline=s),mask:"YYYY-MM-DD",options:m},{default:G(()=>[W("div",zl,[Ue(z(ee,{label:"ç¢ºå®š",color:"primary",flat:""},null,512),[[tt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])]),W("div",Vl,[z(qe,{filled:"",modelValue:o.serviceTarget,"onUpdate:modelValue":M[13]||(M[13]=s=>o.serviceTarget=s),label:"æœå‹™å°è±¡"},null,8,["modelValue"])]),W("div",$l,[z(ut,{filled:"",modelValue:o.category,"onUpdate:modelValue":M[14]||(M[14]=s=>o.category=s),options:d.categories,label:"æ´»å‹•é¡žåˆ¥ *","emit-value":"","map-options":"",rules:[s=>!!s||"è«‹é¸æ“‡æ´»å‹•é¡žåˆ¥"]},null,8,["modelValue","options","rules"])]),W("div",Bl,[z(ut,{filled:"",modelValue:o.volunteerType,"onUpdate:modelValue":M[15]||(M[15]=s=>o.volunteerType=s),options:d.volunteerTypes,label:"å¿—å·¥é¡žåž‹ *","emit-value":"","map-options":"",rules:[s=>!!s||"è«‹é¸æ“‡å¿—å·¥é¡žåž‹"]},null,8,["modelValue","options","rules"])]),W("div",Pl,[z(ut,{filled:"",modelValue:o.serviceSlots,"onUpdate:modelValue":M[16]||(M[16]=s=>o.serviceSlots=s),options:d.serviceSlots,label:"æœå‹™æ™‚æ®µ (å¯å¤šé¸)",multiple:"","emit-value":"","map-options":"","use-chips":""},null,8,["modelValue","options"])]),W("div",Al,[z(ut,{filled:"",modelValue:o.requiredSkills,"onUpdate:modelValue":M[17]||(M[17]=s=>o.requiredSkills=s),options:d.skills,label:"æ‰€éœ€æŠ€èƒ½ (å¯å¤šé¸)",multiple:"","emit-value":"","map-options":"","use-chips":""},null,8,["modelValue","options"])])]),W("div",null,[M[22]||(M[22]=W("div",{class:"text-subtitle1 q-mb-sm"},"æ´»å‹•è©³ç´°ä»‹ç´¹ (æ”¯æ´ Markdown)",-1)),z(gl,{modelValue:o.description,"onUpdate:modelValue":M[18]||(M[18]=s=>o.description=s),"min-height":"15rem"},null,8,["modelValue"])]),W("div",Il,[z(ee,{label:"å–æ¶ˆ",type:"reset",color:"grey",flat:"",to:"/admin/events"}),z(ee,{label:e.isEditMode?"å„²å­˜è®Šæ›´":"ç™¼ä½ˆæ´»å‹•",type:"submit",color:"primary",loading:e.loading||b.value,disable:b.value},null,8,["label","loading","disable"])])]),_:1}))}};export{ao as _};

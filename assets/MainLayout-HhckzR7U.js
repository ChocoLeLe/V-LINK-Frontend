import{c as ee,a as i,h as $,b as ve,g as oe,i as me,e as O,l as se,r as P,w as y,o as ge,d as ot,u as nt,f as it,j as st,k as rt,m as ut,n as dt,p as ct,q as ft,s as Be,t as Se,v as E,x as $e,y as Re,z as vt,A as We,B as Oe,C as mt,D as gt,E as ht,F as yt,G as bt,H as wt,I as _e,J as de,K as Ne,L as pt,M as W,N as L,O as s,P as xt,Q as qt,R as Pe,S as o,T as K,U as ke,V as F,W as q,X as Y,Y as D,Z,_ as ie,$ as z,a0 as A,a1 as _t,a2 as X,a3 as kt,a4 as Ce}from"./index-CDzfjR1d.js";import{Q as Ct}from"./QSpace-zJjN7v2-.js";import{Q as He}from"./QBadge-BHrrKz5O.js";import{u as zt,Q as ae,a as J,b as M}from"./use-quasar-CoSzPzcs.js";import{Q as Me}from"./QList-DS0KwhwR.js";import{Q as St}from"./QMenu-DrN0HsUg.js";import{Q as Ve}from"./QTooltip-BpKTn2x_.js";import{Q as fe}from"./QResizeObserver-Ce1VDxPF.js";import{T as ze}from"./TouchPan-cZO0ax-B.js";import{b as ce}from"./format-DyQxkAtJ.js";import{g as Lt,m as It}from"./application-_UpZYaPi.js";import"./position-engine-BIa8PX1G.js";import"./selection-Bvitp7Xf.js";import"./touch-BjYP5sR0.js";const Tt=ee({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:x}){const c=i(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>$("div",{class:c.value},ve(x.default))}}),Qt=ee({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:x}){const c=i(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>$("div",{class:c.value,role:"toolbar"},ve(x.default))}}),Bt=ee({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:x,emit:c}){const{proxy:{$q:f}}=oe(),l=me(se,O);if(l===O)return console.error("QHeader needs to be child of QLayout"),O;const v=P(parseInt(e.heightHint,10)),m=P(!0),T=i(()=>e.reveal===!0||l.view.value.indexOf("H")!==-1||f.platform.is.ios&&l.isContainer.value===!0),I=i(()=>{if(e.modelValue!==!0)return 0;if(T.value===!0)return m.value===!0?v.value:0;const u=v.value-l.scroll.value.position;return u>0?u:0}),_=i(()=>e.modelValue!==!0||T.value===!0&&m.value!==!0),n=i(()=>e.modelValue===!0&&_.value===!0&&e.reveal===!0),Q=i(()=>"q-header q-layout__section--marginal "+(T.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(_.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),B=i(()=>{const u=l.rows.value.top,H={};return u[0]==="l"&&l.left.space===!0&&(H[f.lang.rtl===!0?"right":"left"]=`${l.left.size}px`),u[2]==="r"&&l.right.space===!0&&(H[f.lang.rtl===!0?"left":"right"]=`${l.right.size}px`),H});function p(u,H){l.update("header",u,H)}function b(u,H){u.value!==H&&(u.value=H)}function S({height:u}){b(v,u),p("size",u)}function k(u){n.value===!0&&b(m,!0),c("focusin",u)}y(()=>e.modelValue,u=>{p("space",u),b(m,!0),l.animate()}),y(I,u=>{p("offset",u)}),y(()=>e.reveal,u=>{u===!1&&b(m,e.modelValue)}),y(m,u=>{l.animate(),c("reveal",u)}),y(l.scroll,u=>{e.reveal===!0&&b(m,u.direction==="up"||u.position<=e.revealOffset||u.position-u.inflectionPoint<100)});const w={};return l.instances.header=w,e.modelValue===!0&&p("size",v.value),p("space",e.modelValue),p("offset",I.value),ge(()=>{l.instances.header===w&&(l.instances.header=void 0,p("size",0),p("offset",0),p("space",!1))}),()=>{const u=ot(x.default,[]);return e.elevated===!0&&u.push($("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),u.push($(fe,{debounce:0,onResize:S})),$("header",{class:Q.value,style:B.value,onFocusin:k},u)}}}),De=150,$t=ee({name:"QDrawer",inheritAttrs:!1,props:{...st,...it,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...nt,"onLayout","miniState"],setup(e,{slots:x,emit:c,attrs:f}){const l=oe(),{proxy:{$q:v}}=l,m=rt(e,v),{preventBodyScroll:T}=ft(),{registerTimeout:I,removeTimeout:_}=ut(),n=me(se,O);if(n===O)return console.error("QDrawer needs to be child of QLayout"),O;let Q,B=null,p;const b=P(e.behavior==="mobile"||e.behavior!=="desktop"&&n.totalWidth.value<=e.breakpoint),S=i(()=>e.mini===!0&&b.value!==!0),k=i(()=>S.value===!0?e.miniWidth:e.width),w=P(e.showIfAbove===!0&&b.value===!1?!0:e.modelValue===!0),u=i(()=>e.persistent!==!0&&(b.value===!0||Fe.value===!0));function H(t,h){if(a(),t!==!1&&n.animate(),R(0),b.value===!0){const V=n.instances[re.value];V?.belowBreakpoint===!0&&V.hide(!1),U(1),n.isContainer.value!==!0&&T(!0)}else U(0),t!==!1&&pe(!1);I(()=>{t!==!1&&pe(!0),h!==!0&&c("show",t)},De)}function g(t,h){j(),t!==!1&&n.animate(),U(0),R(te.value*k.value),xe(),h!==!0?I(()=>{c("hide",t)},De):_()}const{show:r,hide:d}=dt({showing:w,hideOnRouteChange:u,handleShow:H,handleHide:g}),{addToHistory:a,removeFromHistory:j}=ct(w,d,u),N={belowBreakpoint:b,hide:d},C=i(()=>e.side==="right"),te=i(()=>(v.lang.rtl===!0?-1:1)*(C.value===!0?1:-1)),Le=P(0),le=P(!1),he=P(!1),Ie=P(k.value*te.value),re=i(()=>C.value===!0?"left":"right"),ye=i(()=>w.value===!0&&b.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:k.value:0),be=i(()=>e.overlay===!0||e.miniToOverlay===!0||n.view.value.indexOf(C.value?"R":"L")!==-1||v.platform.is.ios===!0&&n.isContainer.value===!0),ne=i(()=>e.overlay===!1&&w.value===!0&&b.value===!1),Fe=i(()=>e.overlay===!0&&w.value===!0&&b.value===!1),je=i(()=>"fullscreen q-drawer__backdrop"+(w.value===!1&&le.value===!1?" hidden":"")),Ze=i(()=>({backgroundColor:`rgba(0,0,0,${Le.value*.4})`})),Te=i(()=>C.value===!0?n.rows.value.top[2]==="r":n.rows.value.top[0]==="l"),Ee=i(()=>C.value===!0?n.rows.value.bottom[2]==="r":n.rows.value.bottom[0]==="l"),Ue=i(()=>{const t={};return n.header.space===!0&&Te.value===!1&&(be.value===!0?t.top=`${n.header.offset}px`:n.header.space===!0&&(t.top=`${n.header.size}px`)),n.footer.space===!0&&Ee.value===!1&&(be.value===!0?t.bottom=`${n.footer.offset}px`:n.footer.space===!0&&(t.bottom=`${n.footer.size}px`)),t}),Ge=i(()=>{const t={width:`${k.value}px`,transform:`translateX(${Ie.value}px)`};return b.value===!0?t:Object.assign(t,Ue.value)}),Ke=i(()=>"q-drawer__content fit "+(n.isContainer.value!==!0?"scroll":"overflow-auto")),Ye=i(()=>`q-drawer q-drawer--${e.side}`+(he.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(m.value===!0?" q-drawer--dark q-dark":"")+(le.value===!0?" no-transition":w.value===!0?"":" q-layout--prevent-focus")+(b.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${S.value===!0?"mini":"standard"}`+(be.value===!0||ne.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(Te.value===!0?" q-drawer--top-padding":""))),Xe=i(()=>{const t=v.lang.rtl===!0?e.side:re.value;return[[ze,at,void 0,{[t]:!0,mouse:!0}]]}),Je=i(()=>{const t=v.lang.rtl===!0?re.value:e.side;return[[ze,Qe,void 0,{[t]:!0,mouse:!0}]]}),et=i(()=>{const t=v.lang.rtl===!0?re.value:e.side;return[[ze,Qe,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]});function we(){lt(b,e.behavior==="mobile"||e.behavior!=="desktop"&&n.totalWidth.value<=e.breakpoint)}y(b,t=>{t===!0?(Q=w.value,w.value===!0&&d(!1)):e.overlay===!1&&e.behavior!=="mobile"&&Q!==!1&&(w.value===!0?(R(0),U(0),xe()):r(!1))}),y(()=>e.side,(t,h)=>{n.instances[h]===N&&(n.instances[h]=void 0,n[h].space=!1,n[h].offset=0),n.instances[t]=N,n[t].size=k.value,n[t].space=ne.value,n[t].offset=ye.value}),y(n.totalWidth,()=>{(n.isContainer.value===!0||document.qScrollPrevented!==!0)&&we()}),y(()=>e.behavior+e.breakpoint,we),y(n.isContainer,t=>{w.value===!0&&T(t!==!0),t===!0&&we()}),y(n.scrollbarWidth,()=>{R(w.value===!0?0:void 0)}),y(ye,t=>{G("offset",t)}),y(ne,t=>{c("onLayout",t),G("space",t)}),y(C,()=>{R()}),y(k,t=>{R(),qe(e.miniToOverlay,t)}),y(()=>e.miniToOverlay,t=>{qe(t,k.value)}),y(()=>v.lang.rtl,()=>{R()}),y(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(tt(),n.animate())}),y(S,t=>{c("miniState",t)});function R(t){t===void 0?Be(()=>{t=w.value===!0?0:k.value,R(te.value*t)}):(n.isContainer.value===!0&&C.value===!0&&(b.value===!0||Math.abs(t)===k.value)&&(t+=te.value*n.scrollbarWidth.value),Ie.value=t)}function U(t){Le.value=t}function pe(t){const h=t===!0?"remove":n.isContainer.value!==!0?"add":"";h!==""&&document.body.classList[h]("q-body--drawer-toggle")}function tt(){B!==null&&clearTimeout(B),l.proxy&&l.proxy.$el&&l.proxy.$el.classList.add("q-drawer--mini-animate"),he.value=!0,B=setTimeout(()=>{B=null,he.value=!1,l?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function at(t){if(w.value!==!1)return;const h=k.value,V=ce(t.distance.x,0,h);if(t.isFinal===!0){V>=Math.min(75,h)===!0?r():(n.animate(),U(0),R(te.value*h)),le.value=!1;return}R((v.lang.rtl===!0?C.value!==!0:C.value)?Math.max(h-V,0):Math.min(0,V-h)),U(ce(V/h,0,1)),t.isFirst===!0&&(le.value=!0)}function Qe(t){if(w.value!==!0)return;const h=k.value,V=t.direction===e.side,ue=(v.lang.rtl===!0?V!==!0:V)?ce(t.distance.x,0,h):0;if(t.isFinal===!0){Math.abs(ue)<Math.min(75,h)===!0?(n.animate(),U(1),R(0)):d(),le.value=!1;return}R(te.value*ue),U(ce(1-ue/h,0,1)),t.isFirst===!0&&(le.value=!0)}function xe(){T(!1),pe(!0)}function G(t,h){n.update(e.side,t,h)}function lt(t,h){t.value!==h&&(t.value=h)}function qe(t,h){G("size",t===!0?e.miniWidth:h)}return n.instances[e.side]=N,qe(e.miniToOverlay,k.value),G("space",ne.value),G("offset",ye.value),e.showIfAbove===!0&&e.modelValue!==!0&&w.value===!0&&e["onUpdate:modelValue"]!==void 0&&c("update:modelValue",!0),Se(()=>{c("onLayout",ne.value),c("miniState",S.value),Q=e.showIfAbove===!0;const t=()=>{(w.value===!0?H:g)(!1,!0)};if(n.totalWidth.value!==0){Be(t);return}p=y(n.totalWidth,()=>{p(),p=void 0,w.value===!1&&e.showIfAbove===!0&&b.value===!1?r(!1):t()})}),ge(()=>{p?.(),B!==null&&(clearTimeout(B),B=null),w.value===!0&&xe(),n.instances[e.side]===N&&(n.instances[e.side]=void 0,G("size",0),G("offset",0),G("space",!1))}),()=>{const t=[];b.value===!0&&(e.noSwipeOpen===!1&&t.push(E($("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),Xe.value)),t.push($e("div",{ref:"backdrop",class:je.value,style:Ze.value,"aria-hidden":"true",onClick:d},void 0,"backdrop",e.noSwipeBackdrop!==!0&&w.value===!0,()=>et.value)));const h=S.value===!0&&x.mini!==void 0,V=[$("div",{...f,key:""+h,class:[Ke.value,f.class]},h===!0?x.mini():ve(x.default))];return e.elevated===!0&&w.value===!0&&V.push($("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push($e("aside",{ref:"content",class:Ye.value,style:Ge.value},V,"contentclose",e.noSwipeClose!==!0&&b.value===!0,()=>Je.value)),$("div",{class:"q-drawer-container"},t)}}}),Pt=ee({name:"QPageContainer",setup(e,{slots:x}){const{proxy:{$q:c}}=oe(),f=me(se,O);if(f===O)return console.error("QPageContainer needs to be child of QLayout"),O;Re(vt,!0);const l=i(()=>{const v={};return f.header.space===!0&&(v.paddingTop=`${f.header.size}px`),f.right.space===!0&&(v[`padding${c.lang.rtl===!0?"Left":"Right"}`]=`${f.right.size}px`),f.footer.space===!0&&(v.paddingBottom=`${f.footer.size}px`),f.left.space===!0&&(v[`padding${c.lang.rtl===!0?"Right":"Left"}`]=`${f.left.size}px`),v});return()=>$("div",{class:"q-page-container",style:l.value},ve(x.default))}}),Ht=ee({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:x,emit:c}){const{proxy:{$q:f}}=oe(),l=me(se,O);if(l===O)return console.error("QFooter needs to be child of QLayout"),O;const v=P(parseInt(e.heightHint,10)),m=P(!0),T=P(We.value===!0||l.isContainer.value===!0?0:window.innerHeight),I=i(()=>e.reveal===!0||l.view.value.indexOf("F")!==-1||f.platform.is.ios&&l.isContainer.value===!0),_=i(()=>l.isContainer.value===!0?l.containerHeight.value:T.value),n=i(()=>{if(e.modelValue!==!0)return 0;if(I.value===!0)return m.value===!0?v.value:0;const r=l.scroll.value.position+_.value+v.value-l.height.value;return r>0?r:0}),Q=i(()=>e.modelValue!==!0||I.value===!0&&m.value!==!0),B=i(()=>e.modelValue===!0&&Q.value===!0&&e.reveal===!0),p=i(()=>"q-footer q-layout__section--marginal "+(I.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(Q.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(I.value!==!0?" hidden":""):"")),b=i(()=>{const r=l.rows.value.bottom,d={};return r[0]==="l"&&l.left.space===!0&&(d[f.lang.rtl===!0?"right":"left"]=`${l.left.size}px`),r[2]==="r"&&l.right.space===!0&&(d[f.lang.rtl===!0?"left":"right"]=`${l.right.size}px`),d});function S(r,d){l.update("footer",r,d)}function k(r,d){r.value!==d&&(r.value=d)}function w({height:r}){k(v,r),S("size",r)}function u(){if(e.reveal!==!0)return;const{direction:r,position:d,inflectionPoint:a}=l.scroll.value;k(m,r==="up"||d-a<100||l.height.value-_.value-d-v.value<300)}function H(r){B.value===!0&&k(m,!0),c("focusin",r)}y(()=>e.modelValue,r=>{S("space",r),k(m,!0),l.animate()}),y(n,r=>{S("offset",r)}),y(()=>e.reveal,r=>{r===!1&&k(m,e.modelValue)}),y(m,r=>{l.animate(),c("reveal",r)}),y([v,l.scroll,l.height],u),y(()=>f.screen.height,r=>{l.isContainer.value!==!0&&k(T,r)});const g={};return l.instances.footer=g,e.modelValue===!0&&S("size",v.value),S("space",e.modelValue),S("offset",n.value),ge(()=>{l.instances.footer===g&&(l.instances.footer=void 0,S("size",0),S("offset",0),S("space",!1))}),()=>{const r=Oe(x.default,[$(fe,{debounce:0,onResize:w})]);return e.elevated===!0&&r.push($("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),$("footer",{class:p.value,style:b.value,onFocusin:H},r)}}}),{passive:Ae}=mt,Mt=["both","horizontal","vertical"],Vt=ee({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Mt.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:gt},emits:["scroll"],setup(e,{emit:x}){const c={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let f=null,l,v;y(()=>e.scrollTarget,()=>{I(),T()});function m(){f?.();const Q=Math.max(0,bt(l)),B=wt(l),p={top:Q-c.position.top,left:B-c.position.left};if(e.axis==="vertical"&&p.top===0||e.axis==="horizontal"&&p.left===0)return;const b=Math.abs(p.top)>=Math.abs(p.left)?p.top<0?"up":"down":p.left<0?"left":"right";c.position={top:Q,left:B},c.directionChanged=c.direction!==b,c.delta=p,c.directionChanged===!0&&(c.direction=b,c.inflectionPoint=c.position),x("scroll",{...c})}function T(){l=ht(v,e.scrollTarget),l.addEventListener("scroll",_,Ae),_(!0)}function I(){l!==void 0&&(l.removeEventListener("scroll",_,Ae),l=void 0)}function _(Q){if(Q===!0||e.debounce===0||e.debounce==="0")m();else if(f===null){const[B,p]=e.debounce?[setTimeout(m,e.debounce),clearTimeout]:[requestAnimationFrame(m),cancelAnimationFrame];f=()=>{p(B),f=null}}}const{proxy:n}=oe();return y(()=>n.$q.lang.rtl,m),Se(()=>{v=n.$el.parentNode,T()}),ge(()=>{f?.(),I()}),Object.assign(n,{trigger:_,getPosition:()=>c}),yt}}),Dt=ee({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:x,emit:c}){const{proxy:{$q:f}}=oe(),l=P(null),v=P(f.screen.height),m=P(e.container===!0?0:f.screen.width),T=P({position:0,direction:"down",inflectionPoint:0}),I=P(0),_=P(We.value===!0?0:_e()),n=i(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),Q=i(()=>e.container===!1?{minHeight:f.screen.height+"px"}:null),B=i(()=>_.value!==0?{[f.lang.rtl===!0?"left":"right"]:`${_.value}px`}:null),p=i(()=>_.value!==0?{[f.lang.rtl===!0?"right":"left"]:0,[f.lang.rtl===!0?"left":"right"]:`-${_.value}px`,width:`calc(100% + ${_.value}px)`}:null);function b(g){if(e.container===!0||document.qScrollPrevented!==!0){const r={position:g.position.top,direction:g.direction,directionChanged:g.directionChanged,inflectionPoint:g.inflectionPoint.top,delta:g.delta.top};T.value=r,e.onScroll!==void 0&&c("scroll",r)}}function S(g){const{height:r,width:d}=g;let a=!1;v.value!==r&&(a=!0,v.value=r,e.onScrollHeight!==void 0&&c("scrollHeight",r),w()),m.value!==d&&(a=!0,m.value=d),a===!0&&e.onResize!==void 0&&c("resize",g)}function k({height:g}){I.value!==g&&(I.value=g,w())}function w(){if(e.container===!0){const g=v.value>I.value?_e():0;_.value!==g&&(_.value=g)}}let u=null;const H={instances:{},view:i(()=>e.view),isContainer:i(()=>e.container),rootRef:l,height:v,containerHeight:I,scrollbarWidth:_,totalWidth:i(()=>m.value+_.value),rows:i(()=>{const g=e.view.toLowerCase().split(" ");return{top:g[0].split(""),middle:g[1].split(""),bottom:g[2].split("")}}),header:de({size:0,offset:0,space:!1}),right:de({size:300,offset:0,space:!1}),footer:de({size:0,offset:0,space:!1}),left:de({size:300,offset:0,space:!1}),scroll:T,animate(){u!==null?clearTimeout(u):document.body.classList.add("q-body--layout-animate"),u=setTimeout(()=>{u=null,document.body.classList.remove("q-body--layout-animate")},155)},update(g,r,d){H[g][r]=d}};if(Re(se,H),_e()>0){let g=function(){a=null,j.classList.remove("hide-scrollbar")},r=function(){if(a===null){if(j.scrollHeight>f.screen.height)return;j.classList.add("hide-scrollbar")}else clearTimeout(a);a=setTimeout(g,300)},d=function(N){a!==null&&N==="remove"&&(clearTimeout(a),g()),window[`${N}EventListener`]("resize",r)},a=null;const j=document.body;y(()=>e.container!==!0?"add":"remove",d),e.container!==!0&&d("add"),Ne(()=>{d("remove")})}return()=>{const g=Oe(x.default,[$(Vt,{onScroll:b}),$(fe,{onResize:S})]),r=$("div",{class:n.value,style:Q.value,ref:e.container===!0?void 0:l,tabindex:-1},g);return e.container===!0?$("div",{class:"q-layout-container overflow-hidden",ref:l},[$(fe,{onResize:k}),$("div",{class:"absolute-full",style:B.value},[$("div",{class:"scroll",style:p.value},[r])])]):r}}}),At="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMTUgNjAiPgogIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUsIDEwKSIgZmlsbD0id2hpdGUiPgogICAgPHBvbHlnb24gcG9pbnRzPSIwLDAgMTMsNDAgMCw0MCIvPgogICAgPHBvbHlnb24gcG9pbnRzPSI0MCwwIDI3LDQwIDQwLDQwIi8+CiAgICA8cG9seWdvbiBwb2ludHM9IjEwLDAgMzAsMCAyMCwyNSIvPgogIDwvZz4KCiAgPHRleHQgeD0iNjAiIHk9IjQ0IiBmb250LWZhbWlseT0iQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjkwMCIgZm9udC1zaXplPSI0MCIgZmlsbD0id2hpdGUiPlYtTElOSzwvdGV4dD4KPC9zdmc+",Rt={class:"row no-wrap items-center"},Wt=["src"],Ot={key:0,class:"q-ml-md text-grey-3 gt-sm flex items-center",style:{"font-size":"13px","font-weight":"normal","letter-spacing":"1px",opacity:"0.9","border-left":"1px solid rgba(255, 255, 255, 0.3)","padding-left":"12px",height:"28px"}},Nt={key:0,class:"row items-center q-gutter-sm q-mr-md gt-sm"},Ft={class:"row items-center q-gutter-sm"},jt={key:0,class:"text-center q-pa-md text-grey"},Zt={class:"gt-xs q-mr-sm text-bold"},Et=["src"],Ut={key:0,class:"q-py-lg"},Gt={class:"container q-mx-auto q-px-md",style:{"max-width":"1200px"}},Kt={class:"row q-col-gutter-md"},Yt={class:"col-12 col-md-4"},Xt={class:"text-subtitle1 text-bold q-mb-sm flex items-center"},Jt={class:"col-12 col-md-4"},ea={class:"column q-gutter-xs text-caption"},ta={class:"col-12 col-md-4"},aa={class:"column q-gutter-xs text-caption text-grey-5"},la={class:"flex items-center"},oa={class:"flex items-center"},na={class:"flex items-center"},ia={class:"row justify-between items-center text-caption text-grey-6"},sa={class:"flex q-gutter-sm"},ra={key:1,class:"q-py-sm text-center"},ua={class:"text-caption"},Ca={__name:"MainLayout",setup(e){const x=pt(),c=xt(),f=qt(),l=P(!1),v=P([]);let m=null;const T=zt(),I=new Date().getFullYear(),_=i(()=>f.path.startsWith("/my")||f.path.startsWith("/admin")),n=i(()=>f.path.startsWith("/admin")),Q=i(()=>f.path.startsWith("/my")),B=i(()=>n.value?"管理後台":Q.value?"個人後台":"推薦最適合你的志工服務"),p=i(()=>n.value?"bg-red-9 text-white":"bg-primary text-white"),b=i(()=>Q.value?"bg-white text-grey-7":"bg-blue-grey-10 text-white"),S=i(()=>v.value.filter(d=>!d.isRead).length),k=()=>{l.value=!l.value},w=()=>{m&&clearInterval(m),x.logout(),c.push("/login")},u=async()=>{if(x.isLoggedIn)try{const{data:d}=await Lt();v.value=d.result||[]}catch(d){console.error("Fetch notifications failed",d)}},H=async d=>{if(!d.isRead)try{await It(d._id),d.isRead=!0}catch(j){console.error(j)}const a=["rejected","cancelled"].includes(d.type)?"closed":"approved";c.push({path:"/my/applications",query:{tab:a}})},g=d=>({approved:"check_circle",rejected:"cancel",cancelled:"event_busy",system:"info",info:"notifications"})[d]||"notifications",r=d=>({approved:"positive",rejected:"negative",cancelled:"grey-7",system:"primary",info:"info"})[d]||"grey";return y(()=>f.path,()=>{T.screen.lt.md&&l.value&&(l.value=!1)}),y(_,d=>{d?l.value=T.screen.gt.sm:l.value=!1}),y(()=>x.isLoggedIn,d=>{d?(u(),m||(m=setInterval(u,1e4))):(m&&clearInterval(m),m=null,v.value=[])}),Se(()=>{x.isLoggedIn&&(u(),m=setInterval(u,1e4))}),Ne(()=>{m&&clearInterval(m)}),(d,a)=>{const j=Pe("router-view"),N=Pe("router-link");return L(),W(Dt,{view:"hHh Lpr lff"},{default:s(()=>[o(Bt,{elevated:"",class:ke(p.value),style:{"z-index":"4000"}},{default:s(()=>[o(Qt,null,{default:s(()=>[o(Y,{flat:"",dense:"",round:"",icon:"menu",class:"lt-md q-mr-sm",onClick:a[0]||(a[0]=C=>k())}),o(Tt,{class:"text-bold ellipsis row items-center q-pl-none"},{default:s(()=>[q("div",Rt,[q("div",{class:"row no-wrap items-center cursor-pointer",onClick:a[1]||(a[1]=C=>D(c).push("/"))},[q("img",{src:D(At),style:{height:"40px",width:"auto"},class:"gt-xs q-mr-md",alt:"V-Link"},null,8,Wt),a[4]||(a[4]=q("span",{class:"text-h6 text-weight-bold gt-xs"},"智慧志工",-1)),a[5]||(a[5]=q("span",{class:"text-h6 text-weight-bold lt-sm"},"V-LINK",-1))]),D(T).screen.gt.sm?(L(),F("span",Ot,Z(B.value),1)):K("",!0)])]),_:1}),o(Ct),_.value?K("",!0):(L(),F("div",Nt,[o(Y,{flat:"",label:"活動探索",to:"/events"})])),q("div",Ft,[D(x).isLoggedIn?(L(),F(ie,{key:1},[o(Y,{round:"",dense:"",flat:"",color:"white",icon:"notifications"},{default:s(()=>[S.value>0?(L(),W(He,{key:0,color:"red",floating:"",rounded:""},{default:s(()=>[z(Z(S.value),1)]),_:1})):K("",!0),o(St,{anchor:"bottom right",self:"top right","max-width":"350px",offset:[0,8]},{default:s(()=>[o(Me,{bordered:"",padding:"",style:{"min-width":"300px"}},{default:s(()=>[o(ae,{header:""},{default:s(()=>[...a[6]||(a[6]=[z("通知中心",-1)])]),_:1}),v.value.length===0?(L(),F("div",jt,[o(A,{name:"notifications_off",size:"30px"}),a[7]||(a[7]=q("div",{class:"text-caption q-mt-xs"},"目前沒有新通知",-1))])):K("",!0),(L(!0),F(ie,null,_t(v.value,C=>E((L(),W(J,{key:C._id,clickable:"",class:ke({"bg-blue-1":!C.isRead}),onClick:te=>H(C)},{default:s(()=>[o(M,{avatar:""},{default:s(()=>[o(A,{name:g(C.type),color:r(C.type)},null,8,["name","color"])]),_:2},1024),o(M,null,{default:s(()=>[o(ae,{class:"text-weight-bold"},{default:s(()=>[z(Z(C.title),1)]),_:2},1024),o(ae,{caption:"",lines:"2"},{default:s(()=>[z(Z(C.content),1)]),_:2},1024),o(ae,{caption:"",class:"text-grey-6",style:{"font-size":"12px"}},{default:s(()=>[z(Z(new Date(C.createdAt).toLocaleString()),1)]),_:2},1024)]),_:2},1024),C.isRead?K("",!0):(L(),W(M,{key:0,side:"",top:""},{default:s(()=>[o(He,{color:"red",rounded:"",p:"",size:"6px"})]),_:1}))]),_:2},1032,["class","onClick"])),[[X]])),128))]),_:1})]),_:1})]),_:1}),q("div",Zt,Z(D(x).user.name),1),o(kt,{size:"32px",class:"cursor-pointer q-mr-sm",onClick:a[2]||(a[2]=C=>D(c).push("/my/profile"))},{default:s(()=>[q("img",{src:D(x).user.avatar},null,8,Et),o(Ve,null,{default:s(()=>[...a[8]||(a[8]=[z("前往個人檔案",-1)])]),_:1})]),_:1}),o(Y,{flat:"",round:"",dense:"",icon:"logout",onClick:w},{default:s(()=>[o(Ve,null,{default:s(()=>[...a[9]||(a[9]=[z("登出",-1)])]),_:1})]),_:1})],64)):(L(),F(ie,{key:0},[o(Y,{flat:"",label:"登入",to:"/login"}),o(Y,{color:"white","text-color":"primary",label:"註冊",to:"/register"})],64))])]),_:1})]),_:1},8,["class"]),o($t,{modelValue:l.value,"onUpdate:modelValue":a[3]||(a[3]=C=>l.value=C),"show-if-above":_.value,bordered:"",class:"bg-grey-1"},{default:s(()=>[o(Me,null,{default:s(()=>[o(ae,{header:""},{default:s(()=>[...a[10]||(a[10]=[z("平台導覽",-1)])]),_:1}),E((L(),W(J,{clickable:"",to:"/"},{default:s(()=>[o(M,{avatar:""},{default:s(()=>[o(A,{name:"home"})]),_:1}),o(M,null,{default:s(()=>[...a[11]||(a[11]=[z("回到首頁",-1)])]),_:1})]),_:1})),[[X]]),E((L(),W(J,{clickable:"",to:"/events"},{default:s(()=>[o(M,{avatar:""},{default:s(()=>[o(A,{name:"explore"})]),_:1}),o(M,null,{default:s(()=>[...a[12]||(a[12]=[z("活動探索",-1)])]),_:1})]),_:1})),[[X]]),o(Ce,{spaced:""}),D(x).isLoggedIn?(L(),F(ie,{key:0},[o(ae,{header:""},{default:s(()=>[...a[13]||(a[13]=[z("個人管理",-1)])]),_:1}),E((L(),W(J,{clickable:"",to:"/my/applications"},{default:s(()=>[o(M,{avatar:""},{default:s(()=>[o(A,{name:"assignment"})]),_:1}),o(M,null,{default:s(()=>[...a[14]||(a[14]=[z("我的申請",-1)])]),_:1})]),_:1})),[[X]]),E((L(),W(J,{clickable:"",to:"/my/service-history"},{default:s(()=>[o(M,{avatar:""},{default:s(()=>[o(A,{name:"history"})]),_:1}),o(M,null,{default:s(()=>[...a[15]||(a[15]=[z("服務歷程",-1)])]),_:1})]),_:1})),[[X]])],64)):K("",!0),D(x).isAdmin?(L(),F(ie,{key:1},[o(Ce,{spaced:""}),o(ae,{header:"",class:"text-red"},{default:s(()=>[...a[16]||(a[16]=[z("系統管理",-1)])]),_:1}),E((L(),W(J,{clickable:"",to:"/admin/dashboard"},{default:s(()=>[o(M,{avatar:""},{default:s(()=>[o(A,{name:"dashboard",color:"red"})]),_:1}),o(M,null,{default:s(()=>[...a[17]||(a[17]=[z("管理後台",-1)])]),_:1})]),_:1})),[[X]]),E((L(),W(J,{clickable:"",to:"/admin/events"},{default:s(()=>[o(M,{avatar:""},{default:s(()=>[o(A,{name:"settings",color:"red"})]),_:1}),o(M,null,{default:s(()=>[...a[18]||(a[18]=[z("活動控管",-1)])]),_:1})]),_:1})),[[X]]),E((L(),W(J,{clickable:"",to:"/admin/tags"},{default:s(()=>[o(M,{avatar:""},{default:s(()=>[o(A,{name:"style",color:"red"})]),_:1}),o(M,null,{default:s(()=>[...a[19]||(a[19]=[z("標籤維護",-1)])]),_:1})]),_:1})),[[X]])],64)):K("",!0)]),_:1})]),_:1},8,["modelValue","show-if-above"]),o(Pt,null,{default:s(()=>[o(j)]),_:1}),n.value?K("",!0):(L(),W(Ht,{key:0,class:ke(b.value),bordered:Q.value},{default:s(()=>[Q.value?(L(),F("div",ra,[q("div",ua," © "+Z(D(I))+" V-Link 智慧志工平台 | ChocoLeLe | 泰山職訓網頁設計專題 ",1)])):(L(),F("div",Ut,[q("div",Gt,[q("div",Kt,[q("div",Yt,[q("div",Xt,[o(A,{name:"volunteer_activism",size:"xs",class:"q-mr-sm"}),a[20]||(a[20]=z(" V-Link 智慧志工 ",-1))]),a[21]||(a[21]=q("div",{class:"text-caption text-grey-5",style:{"line-height":"1.6"}}," 致力於連結志工熱情與社會需求，打造最便捷的智慧媒合平台。 ",-1))]),q("div",Jt,[a[24]||(a[24]=q("div",{class:"text-subtitle1 text-bold q-mb-sm"},"快速連結",-1)),q("div",ea,[o(N,{to:"/",class:"text-grey-5 hover-text-white text-decoration-none"},{default:s(()=>[...a[22]||(a[22]=[z("回到首頁",-1)])]),_:1}),o(N,{to:"/events",class:"text-grey-5 hover-text-white text-decoration-none"},{default:s(()=>[...a[23]||(a[23]=[z("探索活動",-1)])]),_:1}),o(N,{to:D(x).isLoggedIn?"/my/applications":"/login",class:"text-grey-5 hover-text-white text-decoration-none"},{default:s(()=>[z(Z(D(x).isLoggedIn?"會員中心":"登入/註冊"),1)]),_:1},8,["to"])])]),q("div",ta,[a[28]||(a[28]=q("div",{class:"text-subtitle1 text-bold q-mb-sm"},"聯絡我們",-1)),q("div",aa,[q("div",la,[o(A,{name:"email",class:"q-mr-sm"}),a[25]||(a[25]=z(" contact@vlink.tw ",-1))]),q("div",oa,[o(A,{name:"phone",class:"q-mr-sm"}),a[26]||(a[26]=z(" 02-2345-6789 ",-1))]),q("div",na,[o(A,{name:"location_on",class:"q-mr-sm"}),a[27]||(a[27]=z(" 台北市信義區信義路五段7號 ",-1))])])])]),o(Ce,{color:"grey-8",class:"q-my-md"}),q("div",ia,[q("div",null," © "+Z(D(I))+" V-Link 智慧志工平台 | ChocoLeLe | 泰山職訓網頁設計專題 ",1),q("div",sa,[o(Y,{flat:"",round:"",dense:"",icon:"facebook",size:"sm"}),o(Y,{flat:"",round:"",dense:"",icon:"language",size:"sm"})])])])]))]),_:1},8,["class","bordered"]))]),_:1})}}};export{Ca as default};
